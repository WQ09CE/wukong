# Task Orchestration Protocol (ä»»åŠ¡ç¼–æ’åè®®)

## Pre-Delegation Declaration (å¬å”¤åˆ†èº«å‰å£°æ˜)

**BEFORE EVERY Avatar summoning, declare:**

```
æˆ‘å°†å¬å”¤åˆ†èº«:
- **å…­æ ¹**: [çœ¼/è€³/é¼»/èˆŒ/èº«/æ„/è¶…è¶Šå…­æ ¹]
- **Avatar**: [çœ¼åˆ†èº«/è€³åˆ†èº«/é¼»åˆ†èº«/èˆŒåˆ†èº«/æ–—æˆ˜èƒœä½›/æ„åˆ†èº«/å†…è§‚æ‚Ÿç©º]
- **Reason**: [ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåˆ†èº«]
- **Expected Outcome**: [æœŸæœ›çš„äº¤ä»˜ç‰©]
- **Background**: [true/false - æ˜¯å¦åå°è¿è¡Œ]
```

**æœ¬ä½“èŒè´£æé†’**:
- æœ¬ä½“ä¸“æ³¨äºç”¨æˆ·äº¤äº’ï¼Œä¸ç›´æ¥å†™å¤§é‡ä»£ç 
- ä»£ç å®ç°äº¤ç»™æ–—æˆ˜èƒœä½› (èº«)
- æœ¬ä½“è´Ÿè´£ç›‘ç£ã€éªŒè¯ã€æ±‡æŠ¥

## Avatar Selection Decision Tree (å…­æ ¹é€‰æ‹©å†³ç­–æ ‘)

```
1. æ˜¯ä»£ç æ¢ç´¢/ä¿¡æ¯æœç´¢/ç ”ç©¶ä»»åŠ¡?
   âœ“ YES â†’ ğŸ‘ï¸ çœ¼åˆ†èº« (è§‚) - background=true
   âœ— NO â†’ Continue

2. æ˜¯éœ€æ±‚åˆ†æ/æ¾„æ¸…/ç†è§£ç”¨æˆ·æ„å›¾ä»»åŠ¡?
   âœ“ YES â†’ ğŸ‘‚ è€³åˆ†èº« (å¬)
   âœ— NO â†’ Continue

3. æ˜¯ä»£ç å®¡æŸ¥/è´¨é‡æ£€æŸ¥/å®‰å…¨æ‰«æä»»åŠ¡?
   âœ“ YES â†’ ğŸ‘ƒ é¼»åˆ†èº« (è§‰) - background=true
   âœ— NO â†’ Continue

4. æ˜¯æµ‹è¯•ç¼–å†™/æ–‡æ¡£ç”Ÿæˆ/æŠ¥å‘Šè¾“å‡ºä»»åŠ¡?
   âœ“ YES â†’ ğŸ‘… èˆŒåˆ†èº« (è¨€)
   âœ— NO â†’ Continue

5. æ˜¯ä»£ç å®ç°/ç¼–å†™/å¼€å‘/ä¿®å¤ä»»åŠ¡?
   âœ“ YES â†’ âš”ï¸ æ–—æˆ˜èƒœä½› (è¡Œ)
   âœ— NO â†’ Continue

6. æ˜¯æ¶æ„/è®¾è®¡/æŠ€æœ¯é€‰å‹/å†³ç­–ä»»åŠ¡?
   âœ“ YES â†’ ğŸ§  æ„åˆ†èº« (æ€)
   âœ— NO â†’ Continue

7. æ˜¯æµç¨‹åæ€/é”šç‚¹ç»´æŠ¤/ä¸Šä¸‹æ–‡ç®¡ç†ä»»åŠ¡?
   âœ“ YES â†’ ğŸ”® å†…è§‚æ‚Ÿç©º (è¶…è¶Šå…­æ ¹)
   âœ— NO â†’ Continue

8. æ˜¯ç”¨æˆ·å¯¹è¯/é—®ç­”/ç®€å•ä»»åŠ¡?
   âœ“ YES â†’ æœ¬ä½“ç›´æ¥å¤„ç†
```

**å…­æ ¹å¿«é€Ÿå¯¹ç…§è¡¨:**

| å…­æ ¹ | åˆ†èº« | èƒ½åŠ›ç»´åº¦ | Background? |
|------|------|----------|-------------|
| çœ¼ | çœ¼åˆ†èº« | è§‚å¯ŸÂ·æ¢ç´¢Â·æœç´¢ | Yes |
| è€³ | è€³åˆ†èº« | å€¾å¬Â·ç†è§£Â·éœ€æ±‚ | No |
| é¼» | é¼»åˆ†èº« | æ„ŸçŸ¥Â·å®¡æŸ¥Â·æ£€æµ‹ | Yes |
| èˆŒ | èˆŒåˆ†èº« | è¡¨è¾¾Â·æ²Ÿé€šÂ·æ–‡æ¡£ | No |
| èº« | æ–—æˆ˜èƒœä½› | æ‰§è¡ŒÂ·å®ç°Â·è¡ŒåŠ¨ | No |
| æ„ | æ„åˆ†èº« | æ€è€ƒÂ·è®¾è®¡Â·å†³ç­– | No |
| - | å†…è§‚æ‚Ÿç©º | åæ€Â·é”šç‚¹Â·å¥åº· | No |

## Introspection Protocol (å†…è§‚åè®®)

> å¾æ—¥ä¸‰çœå¾èº« - å¤æ‚ä»»åŠ¡å®Œæˆåï¼Œè¿›è¡Œæ·±åº¦åæ€ã€‚
> åŸºäº feiskyer/claude-code-settings çš„ reflection-harder æ¡†æ¶å¢å¼ºã€‚
> **ä¸å¦‚æ„é‡‘ç®æ£’åè®®é›†æˆ** - å†…è§‚æ—¶åŒæ­¥ç»´æŠ¤é”šç‚¹å’Œä¸Šä¸‹æ–‡å¥åº·åº¦ã€‚

### ä½•æ—¶å¬å”¤å†…è§‚æ‚Ÿç©º

| è§¦å‘æ¡ä»¶ | å†…è§‚æ·±åº¦ | è¯´æ˜ |
|----------|----------|------|
| å¤æ‚ä»»åŠ¡å®Œæˆ | æ·±åº¦ | å¤šåˆ†èº«åä½œçš„ä»»åŠ¡ |
| ä»»åŠ¡å¤±è´¥/é‡åš | æ·±åº¦ | åˆ†æå¤±è´¥åŸå›  |
| ç”¨æˆ·ä¸»åŠ¨è¯·æ±‚ | æŒ‰éœ€ | "åæ€ä¸€ä¸‹"ã€"æ€»ç»“ç»éªŒ"ã€"å†…è§‚" |
| ç®€å•ä»»åŠ¡å®Œæˆ | è·³è¿‡ | ä¸éœ€è¦å†…è§‚ |
| å‘ç°é‡è¦æ¨¡å¼ | æ ‡å‡† | å€¼å¾—æ²‰æ·€çš„ç»éªŒ |
| **ä¸Šä¸‹æ–‡ > 75%** | **æ ‡å‡†** | **å­˜æ¡£å‰åæ€ï¼Œæå–é”šç‚¹** |
| **ä¼šè¯å³å°†ç»“æŸ** | **å¿«é€Ÿ** | **ç¡®ä¿è·¨ä¼šè¯ä¼ é€’å°±ç»ª** |

### å†…è§‚æ·±åº¦

```
å¿«é€Ÿå†…è§‚ (1-2 åˆ†é’Ÿ):
â”œâ”€â”€ ä¸»è¦é—®é¢˜è¯†åˆ«
â”œâ”€â”€ 1-2 æ¡æ”¹è¿›å»ºè®®
â””â”€â”€ é€‚ç”¨: ç®€å•ä»»åŠ¡

æ ‡å‡†å†…è§‚ (3-5 åˆ†é’Ÿ):
â”œâ”€â”€ 3-4 ç»´åº¦åˆ†æ
â”œâ”€â”€ ç»“æ„åŒ–æŠ¥å‘Š
â”œâ”€â”€ æ¨¡å¼æç‚¼
â””â”€â”€ é€‚ç”¨: å¸¸è§„ä»»åŠ¡

æ·±åº¦å†…è§‚ (5-10 åˆ†é’Ÿ):
â”œâ”€â”€ å…¨ 6 ç»´åº¦åˆ†æ
â”‚   â”œâ”€â”€ é—®é¢˜ä¸è§£å†³
â”‚   â”œâ”€â”€ ä»£ç æ¨¡å¼ä¸æ¶æ„
â”‚   â”œâ”€â”€ ç”¨æˆ·åå¥½ä¸å·¥ä½œæµ
â”‚   â”œâ”€â”€ ç³»ç»Ÿç†è§£
â”‚   â”œâ”€â”€ çŸ¥è¯†ç¼ºå£ä¸æ”¹è¿›
â”‚   â””â”€â”€ ğŸ†• ä¸Šä¸‹æ–‡ä¸é”šç‚¹å¥åº·åº¦
â”œâ”€â”€ å®Œæ•´åæ€æŠ¥å‘Š
â”œâ”€â”€ æ›´æ–° notepads/learnings.md
â”œâ”€â”€ ç”Ÿæˆè¡ŒåŠ¨é¡¹
â”œâ”€â”€ ğŸ†• æå–å¹¶åˆ›å»ºé”šç‚¹ [D]/[C]/[I]/[P]/[U]
â”œâ”€â”€ ğŸ†• éªŒè¯ç°æœ‰é”šç‚¹æœ‰æ•ˆæ€§
â”œâ”€â”€ ğŸ†• ç”Ÿæˆä¸‰æ€æ‘˜è¦ (ç¼©/å¸¸/å·¨)
â””â”€â”€ é€‚ç”¨: å¤æ‚ä»»åŠ¡/å¤±è´¥åˆ†æ
```

### å†…è§‚è¾“å‡ºè¦æ±‚

```
1. ä¼šè¯æ¦‚è§ˆ
   - ç›®æ ‡ã€ç»“æœã€æŒç»­æ—¶é—´

2. é—®é¢˜è§£å†³è®°å½•
   - ç”¨æˆ·å½±å“ â†’ æŠ€æœ¯åŸå›  â†’ è§£å†³æ–¹æ¡ˆ â†’ å­¦ä¹ 

3. å»ºç«‹çš„æ¨¡å¼
   - å¯å¤ç”¨æ¨¡å¼æç‚¼ï¼Œå¸¦ç¤ºä¾‹å’Œé€‚ç”¨åœºæ™¯

4. ç”¨æˆ·åå¥½
   - å¸¦è¯æ®å¼•ç”¨çš„åå¥½è®°å½•

5. æ”¹è¿›æœºä¼š
   - ç«‹å³å¯è¡Œ vs æœªæ¥ä¼˜åŒ–

6. è¡ŒåŠ¨é¡¹
   - å…·ä½“ã€å¯æ‰§è¡Œçš„åç»­æ­¥éª¤
```

### å†…è§‚åŸåˆ™

```
âœ… æ­£ç¡®çš„å†…è§‚:
â”œâ”€â”€ æç‚¼å¯å¤ç”¨æ¨¡å¼
â”œâ”€â”€ è®°å½•ç”¨æˆ·å·¥ä½œé£æ ¼
â”œâ”€â”€ ç´¯ç§¯çŸ¥è¯†è®©åç»­æ›´é«˜æ•ˆ
â”œâ”€â”€ è¯†åˆ«å·¥ä½œæµä¼˜åŒ–æœºä¼š
â”œâ”€â”€ æ˜ç¡®è‡ªä¸»è¾¹ç•Œ
â””â”€â”€ å°†å­¦ä¹ æ²‰æ·€åˆ° notepads/

âŒ é”™è¯¯çš„å†…è§‚:
â”œâ”€â”€ åªæ‰¹è¯„ä¸è‚¯å®š
â”œâ”€â”€ æ³›æ³›è€Œè°ˆæ— æ³•æ‰§è¡Œ
â”œâ”€â”€ ä¸ºäº†åæ€è€Œåæ€
â”œâ”€â”€ å¿½è§†æˆåŠŸç»éªŒ
â””â”€â”€ ä¸äº§å‡ºå¯å¤ç”¨çŸ¥è¯†
```

### å†…è§‚åçš„çŸ¥è¯†æ²‰æ·€

```
å†…è§‚å®Œæˆåï¼Œå¿…é¡»æ›´æ–°çŸ¥è¯†åº“:
â”œâ”€â”€ notepads/{plan}/learnings.md  â† ç»éªŒæ•™è®­
â”œâ”€â”€ notepads/{plan}/decisions.md  â† é‡è¦å†³ç­–
â”œâ”€â”€ notepads/{plan}/issues.md     â† é—®é¢˜è®°å½•
â””â”€â”€ notepads/{plan}/breakthroughs.md â† çªç ´è®°å½• (å¦‚æœ‰)
```

### å†…è§‚ä¸é‡‘ç®æ£’åè®®é›†æˆ

```
å†…è§‚å®Œæˆåï¼Œå¿…é¡»ç»´æŠ¤ä¸Šä¸‹æ–‡ç³»ç»Ÿ:

1. é”šç‚¹æå–
   â”œâ”€â”€ æ‰«ææœ¬æ¬¡ä¼šè¯çš„å…³é”®ä¿¡æ¯
   â”œâ”€â”€ åˆ›å»ºæ–°é”šç‚¹ â†’ è¿½åŠ åˆ° context/anchors.md
   â””â”€â”€ ç±»å‹: [D]å†³ç­– [C]çº¦æŸ [I]æ¥å£ [P]é—®é¢˜ [U]åå¥½

2. é”šç‚¹éªŒè¯
   â”œâ”€â”€ æ£€æŸ¥ anchors.md ä¸­çš„ç°æœ‰é”šç‚¹
   â”œâ”€â”€ æ ‡è®°è¿‡æœŸé”šç‚¹ âŒ
   â”œâ”€â”€ æ›´æ–°éœ€ä¿®æ”¹çš„é”šç‚¹ âš ï¸
   â””â”€â”€ ç¡®è®¤æœ‰æ•ˆé”šç‚¹ âœ…

3. ä¸‰æ€å­˜æ¡£
   â”œâ”€â”€ context/current/compact.md  â† ğŸ”¸ ç¼©å½¢æ€æ‘˜è¦
   â”œâ”€â”€ context/current/normal.md   â† ğŸ”¹ å¸¸å½¢æ€æ‘˜è¦
   â””â”€â”€ context/current/expanded.md â† ğŸ”¶ å®Œæ•´å†…è§‚æŠ¥å‘Š

4. ä¸Šä¸‹æ–‡å¥åº·è¯„ä¼°
   â”œâ”€â”€ é”šç‚¹è¦†ç›–åº¦: å…³é”®ä¿¡æ¯æ˜¯å¦éƒ½æœ‰é”šç‚¹
   â”œâ”€â”€ ä¿¡æ¯å¯†åº¦: æ˜¯å¦æœ‰å¯å‹ç¼©çš„å†—ä½™
   â””â”€â”€ è·¨ä¼šè¯å°±ç»ª: æ˜¯å¦å¯ä»¥å®‰å…¨ç»“æŸä¼šè¯
```

### å†…è§‚è§¦å‘çš„å­˜æ¡£æµç¨‹

```
å½“å†…è§‚æ£€æµ‹åˆ°ä»¥ä¸‹æƒ…å†µæ—¶ï¼Œè§¦å‘å­˜æ¡£:

ä¸Šä¸‹æ–‡ > 75%:
â”œâ”€â”€ 1. ç”Ÿæˆä¸‰æ€æ‘˜è¦
â”œâ”€â”€ 2. å°† current/ ç§»åŠ¨åˆ° sessions/{date}-{name}/
â”œâ”€â”€ 3. åˆ›å»ºæ–°çš„ current/ ä½¿ç”¨ compact.md
â””â”€â”€ 4. é€šçŸ¥ç”¨æˆ·: "ä¸Šä¸‹æ–‡å·²å­˜æ¡£ï¼Œå¯å®‰å…¨ç»§ç»­"

ä¼šè¯å³å°†ç»“æŸ:
â”œâ”€â”€ 1. å¿«é€Ÿå†…è§‚
â”œâ”€â”€ 2. ç¡®ä¿å…³é”®é”šç‚¹å·²æå–
â”œâ”€â”€ 3. ç”Ÿæˆ compact.md ä¾›ä¸‹æ¬¡ä½¿ç”¨
â””â”€â”€ 4. æç¤º: "ä¸‹æ¬¡å¯ä»¥è¯´'ç»§ç»­{ä»»åŠ¡}'åŠ è½½ä¸Šä¸‹æ–‡"
```

## Task Prompt Template

```markdown
## ä»»åŠ¡ (TASK)
[å…·ä½“ã€å¯è¡¡é‡çš„ç›®æ ‡]

## èƒŒæ™¯ (CONTEXT)
- æŠ€æœ¯æ ˆ: [C++/Python/FastAPI/...]
- ç›¸å…³æ–‡ä»¶: [file paths]
- ç°æœ‰æ¨¡å¼: [patterns to follow]

## æœŸæœ›äº§å‡º (EXPECTED OUTCOME)
- [ ] [å…·ä½“äº¤ä»˜ç‰© 1]
- [ ] [å…·ä½“äº¤ä»˜ç‰© 2]
- [ ] [æˆåŠŸæ ‡å‡†]

## å¿…é¡»åš (MUST DO)
- [éµå¾ªçš„è§„èŒƒ]
- [å‚è€ƒçš„æ–‡ä»¶/æ¨¡å—]
- [æ€§èƒ½è¦æ±‚]

## ç¦æ­¢åš (MUST NOT DO)
- [ç¦æ­¢çš„åæ¨¡å¼]
- [é¿å…çš„æŠ€æœ¯å€º]
```

## æ¥å£å¥‘çº¦æ–‡æ¡£ (Interface Contract)

> **å¹¶è¡Œå®ç°å‰ï¼Œå¿…é¡»å…ˆå®šä¹‰æ¥å£å¥‘çº¦ï¼Œé¿å…é›†æˆæ—¶çš„æ¥å£ä¸åŒ¹é…é—®é¢˜ã€‚**

### ä½•æ—¶éœ€è¦æ¥å£å¥‘çº¦

| åœºæ™¯ | æ˜¯å¦éœ€è¦ | åŸå›  |
|------|----------|------|
| å¤šä¸ªæ¨¡å—å¹¶è¡Œå®ç° | âœ… å¿…é¡» | ç¡®ä¿æ¥å£ä¸€è‡´ |
| å•æ¨¡å—å®ç° | âŒ ä¸éœ€è¦ | æ— å¹¶è¡Œé›†æˆé£é™© |
| å·²æœ‰å‚è€ƒå®ç° | âš ï¸ å¯é€‰ | å¯ä»å‚è€ƒä»£ç æ¨æ–­ |

### å¥‘çº¦æ–‡æ¡£ä½ç½®

```
.wukong/notepads/{plan}/interfaces.md
```

### å¥‘çº¦æ–‡æ¡£æ ¼å¼

```markdown
# æ¥å£å¥‘çº¦: {Project Name}

## æ¨¡å—ä¾èµ–å›¾
```
A â”€â”€â†’ C
B â”€â”€â†’ C
```

## æ¨¡å—æ¥å£å®šä¹‰

### ModuleA (credentials.py)

```python
class Credentials:
    @staticmethod
    def get_git_token() -> Optional[str]:
        """è·å– Git Tokenï¼Œè¿”å› None è¡¨ç¤ºæœªé…ç½®"""
        ...

    @staticmethod
    def get_ollama_config() -> dict:
        """è¿”å› {"url": str, "model": str, "timeout": int}"""
        ...
```

### ModuleB (sanitizer.py)

```python
class Sanitizer:
    @classmethod
    def sanitize(cls, data: Any) -> Any:
        """é€’å½’è„±æ•ï¼Œç§»é™¤æ•æ„Ÿå­—æ®µ"""
        ...
```

## é”™è¯¯å¤„ç†çº¦å®š

| æ¨¡å— | é”™è¯¯å¤„ç†æ–¹å¼ |
|------|-------------|
| credentials | è¿”å› None æˆ– é»˜è®¤å€¼ |
| tools | è¿”å› {"error": str} |
| agent | æŠ›å‡º RuntimeError |
| server | æŠ›å‡º HTTPException |

## æ•°æ®æµ

```
ç”¨æˆ·è¯·æ±‚ â†’ Server â†’ Agent â†’ Tools â†’ è¿”å›è„±æ•ç»“æœ
```
```

### å¥‘çº¦ç”Ÿæˆæ—¶æœº

```
è®¾è®¡é˜¶æ®µ (æ¶æ„æ‚Ÿç©º):
â”œâ”€â”€ 1. ç¡®å®šæ¨¡å—åˆ’åˆ†
â”œâ”€â”€ 2. å®šä¹‰æ¨¡å—æ¥å£
â”œâ”€â”€ 3. ç”Ÿæˆ interfaces.md
â””â”€â”€ 4. åˆ†å‘ç»™å„æ–—æˆ˜èƒœä½›

å®ç°é˜¶æ®µ (æ–—æˆ˜èƒœä½›):
â”œâ”€â”€ 1. é˜…è¯» interfaces.md
â”œâ”€â”€ 2. ä¸¥æ ¼æŒ‰æ¥å£å®ç°
â””â”€â”€ 3. ä¸å¾—æ“…è‡ªä¿®æ”¹æ¥å£
```

## Parallel Execution Strategy (ç­‹æ–—äº‘å¹¶è¡Œç­–ç•¥)

> **ç­‹æ–—äº‘**: ä¸€ä¸ªç­‹æ–—åä¸‡å…«åƒé‡Œã€‚åˆ†èº«æœ¯çš„ç²¾é«“åœ¨äº**åŒæ—¶å‡ºå‡»**ï¼Œè€Œéæ’é˜Ÿç­‰å€™ã€‚

### The Parallelization Decision Tree (å¹¶è¡Œå†³ç­–æ ‘)

```
å¼€å§‹ä»»åŠ¡åˆ†æ
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q1: ä»»åŠ¡å¯ä»¥åˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹å­ä»»åŠ¡å—ï¼Ÿ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€ NO â†’ å•åˆ†èº«ä¸²è¡Œæ‰§è¡Œ
     â”‚
     â–¼ YES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q2: å­ä»»åŠ¡ä¹‹é—´æœ‰æ•°æ®ä¾èµ–å—ï¼Ÿ               â”‚
â”‚     (ä¸€ä¸ªçš„è¾“å‡ºæ˜¯å¦ä¸€ä¸ªçš„è¾“å…¥)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€ YES â†’ æŒ‰ä¾èµ–é¡ºåºä¸²è¡Œ
     â”‚
     â–¼ NO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q3: å­ä»»åŠ¡ä¼šä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶å—ï¼Ÿ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€ YES â†’ ä¸²è¡Œæ‰§è¡Œï¼ˆé¿å…å†²çªï¼‰
     â”‚
     â–¼ NO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… å¯ä»¥å¹¶è¡Œï¼å¬å”¤å¤šä¸ªåˆ†èº«åŒæ—¶æ‰§è¡Œ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Parallelization Patterns (å¹¶è¡Œæ¨¡å¼)

#### Pattern 1: **åˆ†èº«ç¾¤æ”»** (Multi-Module Implementation)
**åœºæ™¯**: å®ç°å¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼ˆæ— ç›¸äº’ä¾èµ–ï¼‰
**åŠ é€Ÿæ¯”**: ç†è®º Nxï¼ˆN = æ¨¡å—æ•°ï¼‰

```
è®¾è®¡å®Œæˆå:
     â”‚
     â”œâ”€â”€â†’ [æ–—æˆ˜èƒœä½› A] å®ç° module_a.py  â”€â”€â”
     â”œâ”€â”€â†’ [æ–—æˆ˜èƒœä½› B] å®ç° module_b.py  â”€â”€â”¼â”€â”€â†’ åˆå¹¶éªŒè¯
     â””â”€â”€â†’ [æ–—æˆ˜èƒœä½› C] å®ç° module_c.py  â”€â”€â”˜

# å¬å”¤æ–¹å¼ (åœ¨åŒä¸€æ¡æ¶ˆæ¯ä¸­å‘é€å¤šä¸ª Task)
Task(subagent_type="general-purpose", prompt="å®ç° module_a", run_in_background=true)
Task(subagent_type="general-purpose", prompt="å®ç° module_b", run_in_background=true)
Task(subagent_type="general-purpose", prompt="å®ç° module_c", run_in_background=true)
```

#### Pattern 2: **ä¾¦å¯Ÿå…µ + ä¸»åŠ›å†›** (Scout & Infantry)
**åœºæ™¯**: å®ç°åŠŸèƒ½æ—¶éœ€è¦ä¸æ–­æŸ¥é˜…å‚è€ƒ
**åŠ é€Ÿæ¯”**: å‡å°‘ç­‰å¾…æ—¶é—´

```
å¼€å§‹å®ç°:
     â”‚
     â”œâ”€â”€â†’ [çœ¼åˆ†èº«] ç ”ç©¶ç›¸å…³ API å’Œæ¨¡å¼ (åå°)
     â”‚         â”‚
     â”‚         â””â”€â”€â†’ æŒç»­æä¾›å‚è€ƒä¿¡æ¯
     â”‚
     â””â”€â”€â†’ [æ–—æˆ˜èƒœä½›] å¼€å§‹å®ç°ä»£ç 
               â”‚
               â””â”€â”€â†’ é‡åˆ°ä¸ç¡®å®šæ—¶ï¼Œä»çœ¼åˆ†èº«è·å–ç­”æ¡ˆ

# å¬å”¤æ–¹å¼
Task(subagent_type="Explore", prompt="ç ”ç©¶ X åº“çš„ç”¨æ³•å’Œæœ€ä½³å®è·µ", run_in_background=true)
Task(subagent_type="general-purpose", prompt="å®ç° Y åŠŸèƒ½ï¼Œå‚è€ƒçœ¼åˆ†èº«çš„å‘ç°")
```

#### Pattern 3: **TDD é’³å½¢æ”»åŠ¿** (Test + Implement Pincer)
**åœºæ™¯**: æ¥å£å·²æ˜ç¡®å®šä¹‰ï¼ˆè®¾è®¡æ–‡æ¡£/å¤´æ–‡ä»¶ï¼‰
**åŠ é€Ÿæ¯”**: ~2x

```
æ¥å£å®šä¹‰å®Œæˆ:
     â”‚
     â”œâ”€â”€â†’ [èˆŒåˆ†èº«] æ ¹æ®æ¥å£ç¼–å†™æµ‹è¯• (åå°)
     â”‚
     â””â”€â”€â†’ [æ–—æˆ˜èƒœä½›] å®ç°æ¥å£ (åå°)
               â”‚
               â–¼
          [åˆå¹¶] â†’ è¿è¡Œæµ‹è¯• â†’ éªŒè¯

# å¬å”¤æ–¹å¼
Task(subagent_type="general-purpose", prompt="æ ¹æ®æ¥å£å®šä¹‰ç¼–å†™æµ‹è¯•", run_in_background=true)
Task(subagent_type="general-purpose", prompt="å®ç°æ¥å£", run_in_background=true)
# ç­‰å¾…ä¸¤è€…å®Œæˆåè¿è¡Œæµ‹è¯•
```

#### Pattern 4: **ä»£ç  + é…ç½®å¹¶è¡Œ** (Code + Config Parallel)
**åœºæ™¯**: å®ç°ä»£ç çš„åŒæ—¶å‡†å¤‡éƒ¨ç½²é…ç½®
**åŠ é€Ÿæ¯”**: ~1.5x

```
è®¾è®¡å®Œæˆå:
     â”‚
     â”œâ”€â”€â†’ [æ–—æˆ˜èƒœä½›] å®ç°æ ¸å¿ƒä»£ç 
     â”‚
     â””â”€â”€â†’ [æ„åˆ†èº«] å‡†å¤‡ Dockerfile / CI é…ç½® (åå°)
               â”‚
               â””â”€â”€â†’ å®¹å™¨é…ç½®ä¸ä¾èµ–å…·ä½“å®ç°ç»†èŠ‚

# å¬å”¤æ–¹å¼
Task(subagent_type="general-purpose", prompt="å®ç°æ ¸å¿ƒåŠŸèƒ½ä»£ç ")
Task(subagent_type="general-purpose", prompt="å‡†å¤‡ Dockerfile å’Œ docker-compose", run_in_background=true)
```

#### Pattern 5: **èœ‚ç¾¤æ¨¡å¼** (Swarm - Mass Operations)
**åœºæ™¯**: æ‰¹é‡é‡æ„/è¿ç§»å¤šä¸ªç‹¬ç«‹æ–‡ä»¶
**åŠ é€Ÿæ¯”**: ~Nx

```
é‡æ„è®¡åˆ’ç¡®å®šå:
     â”‚
     â”œâ”€â”€â†’ [æ–—æˆ˜èƒœä½› A] é‡æ„ file_1.py  â”€â”€â”
     â”œâ”€â”€â†’ [æ–—æˆ˜èƒœä½› B] é‡æ„ file_2.py  â”€â”€â”¤
     â”œâ”€â”€â†’ [æ–—æˆ˜èƒœä½› C] é‡æ„ file_3.py  â”€â”€â”¼â”€â”€â†’ åˆå¹¶
     â””â”€â”€â†’ [æ–—æˆ˜èƒœä½› D] é‡æ„ file_4.py  â”€â”€â”˜

# å¬å”¤æ–¹å¼ (é™åˆ¶åŒæ—¶ 3-4 ä¸ªåˆ†èº«)
Task(subagent_type="general-purpose", prompt="é‡æ„ file_1", run_in_background=true)
Task(subagent_type="general-purpose", prompt="é‡æ„ file_2", run_in_background=true)
Task(subagent_type="general-purpose", prompt="é‡æ„ file_3", run_in_background=true)
```

### Parallelization Rules (å¹¶è¡Œè§„åˆ™)

#### âœ… å¯ä»¥å¹¶è¡Œçš„åœºæ™¯

| åœºæ™¯ | æ¨¡å¼ | æœ€å¤§å¹¶è¡Œæ•° |
|------|------|-----------|
| å®ç°å¤šä¸ªç‹¬ç«‹æ¨¡å— | åˆ†èº«ç¾¤æ”» | 3-4 |
| å®ç° + æ¢ç´¢å‚è€ƒ | ä¾¦å¯Ÿå…µ+ä¸»åŠ›å†› | 2 |
| å®ç° + å†™æµ‹è¯• (æ¥å£å·²å®š) | TDDé’³å½¢æ”»åŠ¿ | 2 |
| ä»£ç  + éƒ¨ç½²é…ç½® | ä»£ç +é…ç½®å¹¶è¡Œ | 2 |
| æ‰¹é‡æ–‡ä»¶ä¿®æ”¹ | èœ‚ç¾¤æ¨¡å¼ | 3-4 |
| å¤šæ–‡ä»¶ä»£ç å®¡æŸ¥ | å®¡æŸ¥åˆ†èº«ç¾¤ | 3-4 |
| å¤šæ¨¡å—ä»£ç æ¢ç´¢ | æ¢ç´¢åˆ†èº«ç¾¤ | 3-4 |

#### âŒ å¿…é¡»ä¸²è¡Œçš„åœºæ™¯

| åœºæ™¯ | åŸå›  |
|------|------|
| éœ€æ±‚ â†’ æ¶æ„ â†’ å®ç° | ä¾èµ–ä¸Šæ¸¸è¾“å‡º |
| ä¿®æ”¹åŒä¸€æ–‡ä»¶çš„å¤šä¸ªä»»åŠ¡ | ä¼šäº§ç”Ÿå†²çª |
| æµ‹è¯•ä¾èµ–æœªå®Œæˆçš„ä»£ç  | ä¼šå¤±è´¥ |
| éœ€è¦ç”¨æˆ·ç¡®è®¤çš„å†³ç­–ç‚¹ | é˜»å¡ç­‰å¾… |

### Parallel Execution Syntax (å¹¶è¡Œå¬å”¤è¯­æ³•)

**å…³é”®**: åœ¨**åŒä¸€æ¡æ¶ˆæ¯**ä¸­å‘é€å¤šä¸ª Task è°ƒç”¨

```python
# âœ… æ­£ç¡®: åŒä¸€æ¶ˆæ¯ä¸­å¤šä¸ª Task (å¹¶è¡Œæ‰§è¡Œ)
<message>
Task(subagent_type="general-purpose", prompt="ä»»åŠ¡A", run_in_background=true)
Task(subagent_type="general-purpose", prompt="ä»»åŠ¡B", run_in_background=true)
Task(subagent_type="general-purpose", prompt="ä»»åŠ¡C", run_in_background=true)
</message>

# âŒ é”™è¯¯: åˆ†å¼€å‘é€ (ä¸²è¡Œæ‰§è¡Œ)
<message>Task(...ä»»åŠ¡A...)</message>
<message>Task(...ä»»åŠ¡B...)</message>
<message>Task(...ä»»åŠ¡C...)</message>
```

### Resource Management (èµ„æºç®¡ç†)

```
å¹¶è¡Œåˆ†èº«é™åˆ¶:
â”œâ”€â”€ æœ€å¤§åŒæ—¶è¿è¡Œ: 3-4 ä¸ªåˆ†èº«
â”œâ”€â”€ åå°æ¢ç´¢: ä¸è®¡å…¥é™åˆ¶
â””â”€â”€ è¶…è¿‡é™åˆ¶æ—¶: æ‰¹æ¬¡æ‰§è¡Œ

ç¤ºä¾‹ (8ä¸ªç‹¬ç«‹æ¨¡å—):
â”œâ”€â”€ ç¬¬ä¸€æ‰¹: æ¨¡å— 1, 2, 3, 4 (å¹¶è¡Œ)
â”œâ”€â”€ ç­‰å¾…å®Œæˆ
â””â”€â”€ ç¬¬äºŒæ‰¹: æ¨¡å— 5, 6, 7, 8 (å¹¶è¡Œ)
```

---

### File Territory Protocol (æ–‡ä»¶é¢†åœ°åè®®)

> **å¹¶è¡Œå®ç°æ—¶æœ€å®¹æ˜“æ’è½¦ï¼šä¸¤ä¸ªåˆ†èº«æ”¹åŒä¸€ä¸ªæ–‡ä»¶** - ç”¨é¢†åœ°åè®®é¿å…å†²çªã€‚

#### é¢†åœ°å£°æ˜è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£ å®ç°å‰å£°æ˜é¢†åœ°                                              â”‚
â”‚     æ–—æˆ˜èƒœä½›å¼€å§‹å®ç°å‰ï¼Œå¿…é¡»å£°æ˜æ”¹åŠ¨é¢†åœ°:                         â”‚
â”‚                                                                   â”‚
â”‚     ```                                                           â”‚
â”‚     ## é¢†åœ°å£°æ˜                                                   â”‚
â”‚     åˆ†èº«: æ–—æˆ˜èƒœä½› A                                              â”‚
â”‚     é¢†åœ°:                                                         â”‚
â”‚     - src/auth/login.py (å…¨æ–‡ä»¶)                                 â”‚
â”‚     - src/auth/utils.py (å‡½æ•°: validate_token)                   â”‚
â”‚     - tests/test_auth.py (æ–°å¢)                                  â”‚
â”‚     ```                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2ï¸âƒ£ é¢†åœ°äº’æ–¥                                                    â”‚
â”‚     å…¶ä»–åˆ†èº«ä¸å¾—åœ¨åŒä¸€é¢†åœ°å†™å®ç°æ€§å†…å®¹                            â”‚
â”‚     âœ… å…è®¸: è¯»å–ã€è¯„è®ºã€å»ºè®®                                     â”‚
â”‚     âŒ ç¦æ­¢: ç¼–è¾‘ã€å†™å…¥ã€ä¿®æ”¹                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3ï¸âƒ£ å†²çªå¤„ç†                                                    â”‚
â”‚     è‹¥å¿…é¡»é‡å  (ä¸¤ä¸ªåˆ†èº«éœ€è¦æ”¹åŒä¸€æ–‡ä»¶):                          â”‚
â”‚     - ç”±æœ¬ä½“é‡æ–°åˆ†åŒº (æ‹†åˆ†æˆä¸é‡å çš„éƒ¨åˆ†)                         â”‚
â”‚     - æˆ–ä¸²è¡ŒåŒ– (å…ˆå®Œæˆä¸€ä¸ªï¼Œå†å¼€å§‹å¦ä¸€ä¸ª)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é¢†åœ°ç±»å‹

| ç±»å‹ | æ ¼å¼ | è¯´æ˜ |
|------|------|------|
| å…¨æ–‡ä»¶ | `src/module.py` | ç‹¬å æ•´ä¸ªæ–‡ä»¶ |
| å‡½æ•°çº§ | `src/module.py:func_name` | åªæ”¹ç‰¹å®šå‡½æ•° |
| ç±»çº§ | `src/module.py:ClassName` | åªæ”¹ç‰¹å®šç±» |
| æ–°å¢ | `src/new_file.py (æ–°å¢)` | åˆ›å»ºæ–°æ–‡ä»¶ |

#### é¢†åœ°å†²çªæ£€æµ‹

```
æœ¬ä½“åœ¨åˆ†å‘ä»»åŠ¡å‰ï¼Œæ£€æŸ¥é¢†åœ°å†²çª:

ä»»åŠ¡åˆ†å‘:
â”œâ”€â”€ æ–—æˆ˜èƒœä½› A: src/auth.py, src/utils.py
â”œâ”€â”€ æ–—æˆ˜èƒœä½› B: src/api.py, src/utils.py  â† âš ï¸ å†²çª!
â”‚                          â†‘
â”‚                    ä¸ A çš„ utils.py é‡å 
â”‚
â””â”€â”€ å†²çªè§£å†³:
    â”œâ”€â”€ æ–¹æ¡ˆ1: é‡æ–°åˆ†åŒº
    â”‚   - A: src/auth.py, src/utils.py:validate_*
    â”‚   - B: src/api.py, src/utils.py:format_*
    â”‚
    â””â”€â”€ æ–¹æ¡ˆ2: ä¸²è¡ŒåŒ–
        - A å…ˆå®Œæˆ â†’ B å†å¼€å§‹
```

#### é¢†åœ°é‡Šæ”¾

```
åˆ†èº«å®Œæˆä»»åŠ¡åï¼Œè‡ªåŠ¨é‡Šæ”¾é¢†åœ°:

æ–—æˆ˜èƒœä½› A å®Œæˆ:
â”œâ”€â”€ è¾“å‡ºå®ç°æŠ¥å‘Š
â”œâ”€â”€ æ ‡è®°: é¢†åœ°å·²é‡Šæ”¾
â””â”€â”€ å…¶ä»–åˆ†èº«å¯æ¥ç®¡
```

### Merge Protocol (åˆå¹¶åè®®)

å¹¶è¡Œä»»åŠ¡å®Œæˆå:

```
1. æ”¶é›†æ‰€æœ‰åˆ†èº«çš„è¾“å‡º
2. æ£€æŸ¥æ˜¯å¦æœ‰å†²çª
3. å¦‚æœ‰å†²çª â†’ æ‰‹åŠ¨è§£å†³
4. è¿è¡Œå®Œæ•´éªŒè¯ (æ„å»º + æµ‹è¯•)
5. ç¡®è®¤æ— è¯¯åç»§ç»­
```

## Domain-Specific Patterns

### C++ Projects

```markdown
## Build & Test Commands
- Configure: cmake -B build -DCMAKE_BUILD_TYPE=Release
- Build: cmake --build build -j$(nproc)
- Test: ctest --test-dir build --output-on-failure
- Coverage: gcov/lcov

## Code Patterns
- RAII for resource management
- Smart pointers (unique_ptr, shared_ptr)
- Exception safety guarantees
- const correctness
```

### Python Projects

```markdown
## Build & Test Commands
- Install: pip install -e ".[dev]"
- Test: pytest -v --cov
- Lint: ruff check . && mypy .
- Format: ruff format .

## Code Patterns
- Type hints (Python 3.10+)
- Pydantic for data validation
- async/await for I/O
- Dependency injection
```

### FastAPI Projects

```markdown
## Structure
src/
â”œâ”€â”€ api/           # Route handlers
â”œâ”€â”€ core/          # Config, security
â”œâ”€â”€ models/        # Pydantic models
â”œâ”€â”€ services/      # Business logic
â””â”€â”€ repositories/  # Data access

## Patterns
- Dependency injection via Depends
- Async database operations
- Response models for validation
- OpenAPI documentation
```

### Video Processing

```markdown
## Libraries
- FFmpeg: transcoding, muxing
- GStreamer: pipeline processing
- OpenCV: frame analysis
- VAAPI/NVENC: hardware acceleration

## Patterns
- Zero-copy frame passing
- Pipeline parallelism
- Memory pool management
- Frame rate control
```

### AI Inference

```markdown
## Runtimes
- ONNX Runtime: cross-platform
- TensorRT: NVIDIA optimization
- OpenVINO: Intel optimization

## Patterns
- Batching for throughput
- Async inference
- Model versioning
- Input validation
```

## Workflow Tracks - Default DAG (è½¨é“é»˜è®¤ä¾èµ–å›¾)

> **å¹¶è¡Œè¦"å¯é¢„æµ‹"** - æ¯æ¡è½¨é“å›ºå®šæˆé»˜è®¤ DAGï¼Œé¿å…"å¤§å®¶ä¸€èµ·å¹²ä½†äº’ç›¸æ‰“æ¶"ã€‚

---

### Track A: Feature Development (åŠŸèƒ½å¼€å‘)

**Trigger**: "Add", "Create", "New", "Implement feature"

**Default DAG**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: éœ€æ±‚+æ¢ç´¢ (å¹¶è¡Œ)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚ ğŸ‘‚ è€³    â”‚    â”‚ ğŸ‘ çœ¼    â”‚  â† å¯å¹¶è¡Œï¼Œæ— ä¾èµ–                    â”‚
â”‚  â”‚ éœ€æ±‚æ¾„æ¸…  â”‚    â”‚ ç°çŠ¶æ¢ç´¢  â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                      â”‚
â”‚       â”‚              â”‚                                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚              â–¼                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 2: è®¾è®¡ (ä¸²è¡Œ)                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸ§  æ„    â”‚  â† ä¾èµ– Phase 1 çš„è¾“å‡º                   â”‚
â”‚              â”‚ æ¶æ„è®¾è®¡  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â° [Alaya T2] æ–¹æ¡ˆå†»ç»“åæ³¨å…¥                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æŸ¥è¯¢é˜¿èµ–è€¶è¯†:                                                  â”‚ â”‚
â”‚  â”‚ - æå–è®¾è®¡ä¸­çš„æŠ€æœ¯é€‰å‹ â†’ æ£€ç´¢ç›¸å…³ ADR [D ç±»å‹]                 â”‚ â”‚
â”‚  â”‚ - æ³¨å…¥: å†å²å†³ç­–ã€å·²çŸ¥ Tradeoffã€å›æ»šç»éªŒ                      â”‚ â”‚
â”‚  â”‚ - å­—æ•°é™åˆ¶: â‰¤400å­—                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  è¯¦è§: .wukong/skills/alaya-injection.md                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 3: å®ç° (ä¸²è¡Œ)                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ âš”ï¸ èº«    â”‚  â† ä¾èµ–è®¾è®¡æ–¹æ¡ˆ                          â”‚
â”‚              â”‚ ä»£ç å®ç°  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 4: éªŒè¯+å®¡æŸ¥ (å¹¶è¡Œ)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚ ğŸ‘… èˆŒ    â”‚    â”‚ ğŸ‘ƒ é¼»    â”‚  â† å¯å¹¶è¡Œï¼Œæ— ä¾èµ–                    â”‚
â”‚  â”‚ æµ‹è¯•ç¼–å†™  â”‚    â”‚ ä»£ç å®¡æŸ¥  â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                      â”‚
â”‚       â”‚              â”‚                                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚              â–¼                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 5: æ”¶æ•› (æœ¬ä½“)                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸµ æœ¬ä½“  â”‚  â† æ±‡æ€»ã€éªŒè¯ã€äº¤ä»˜æŠ¥å‘Š                   â”‚
â”‚              â”‚ GateéªŒè¯ â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Gate è¦æ±‚**: L2 + AC æµ‹è¯•è¦†ç›–ï¼ˆæ ¸å¿ƒæµç¨‹å»ºè®® L3ï¼‰

---

## å…«è¯†éªŒè¯æµæ°´çº¿ (Eight Consciousness Verification Pipeline)

> **å…­æ ¹æ‰§è¡Œ â†’ æœ«é‚£è¿‡æ»¤ â†’ æˆ’å®šæ…§éªŒè¯ â†’ é˜¿èµ–è€¶æ²‰æ·€**
> æ‰€æœ‰è½¨é“åœ¨ Phase 5 æ”¶æ•›å‰ï¼Œå¿…é¡»ç»è¿‡æ­¤æµæ°´çº¿ã€‚

### æµæ°´çº¿æ¶æ„

```
å…­æ ¹åˆ†èº«è¾“å‡º (çœ¼/è€³/é¼»/èˆŒ/èº«/æ„)
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æœ«é‚£è¯† (Manas Filter)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ£€æŸ¥éšè—å‡è®¾:                       â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦å‡è®¾äº†ç”¨æˆ·æœªè¯´çš„æ¡ä»¶ï¼Ÿ         â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦å‡è®¾äº†ä»£ç è¡Œä¸ºï¼Ÿ(éœ€éªŒè¯)       â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦æœ‰æœªéªŒè¯çš„æ€§èƒ½å‡è®¾ï¼Ÿ           â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦æœ‰æ½œåœ¨åè§ï¼Ÿ                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  è¾“å‡º: å‡è®¾æ¸…å• + åè§æ ‡è®°               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æˆ’ å…³ (Sila Gate)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è§„åˆ™éµå®ˆæ£€æŸ¥:                       â”‚  â”‚
â”‚  â”‚ â–¡ Output Contract æ˜¯å¦å®Œæ•´ï¼Ÿ        â”‚  â”‚
â”‚  â”‚ â–¡ Do/Don't è¾¹ç•Œæ˜¯å¦éµå®ˆï¼Ÿ           â”‚  â”‚
â”‚  â”‚ â–¡ é¢†åœ°åè®®æ˜¯å¦éµå®ˆï¼Ÿ                 â”‚  â”‚
â”‚  â”‚ â–¡ å®‰å…¨è§„èŒƒæ˜¯å¦æ»¡è¶³ï¼Ÿ                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  é€šè¿‡ â†’ ç»§ç»­ | è¿å â†’ è¿”å›å…­æ ¹ä¿®æ­£       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å®š å…³ (Samadhi Gate)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å¯å¤ç°/å¯è¿è¡Œæ£€æŸ¥:                   â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦æœ‰å¯æ‰§è¡Œçš„éªŒè¯å‘½ä»¤ï¼Ÿ           â”‚  â”‚
â”‚  â”‚ â–¡ æœ¬åœ°æ˜¯å¦å¯ä»¥å¤ç°ï¼Ÿ                 â”‚  â”‚
â”‚  â”‚ â–¡ æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼Ÿ                     â”‚  â”‚
â”‚  â”‚ â–¡ æ„å»ºæ˜¯å¦æˆåŠŸï¼Ÿ                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  è¾¾åˆ° L2 â†’ ç»§ç»­ | æœªè¾¾åˆ° â†’ è¡¥å……éªŒè¯      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ…§ å…³ (Prajna Gate)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ éªŒè¯ & æŠ½è±¡æ£€æŸ¥:                     â”‚  â”‚
â”‚  â”‚ â–¡ AC æ˜¯å¦å…¨éƒ¨æ»¡è¶³ï¼Ÿ                  â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦æœ‰å¯æç‚¼çš„æ¨¡å¼ï¼Ÿ               â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦éœ€è¦åˆ›å»º ADR é”šç‚¹ï¼Ÿ            â”‚  â”‚
â”‚  â”‚ â–¡ æ˜¯å¦æœ‰å€¼å¾—è®°å½•çš„ç»éªŒï¼Ÿ             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  è¾¾åˆ° L3 â†’ ç»§ç»­ | L2 è¶³å¤Ÿ â†’ æ ‡è®°é€šè¿‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        é˜¿èµ–è€¶è¯† (Alaya Store)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¸šåŠ›æ²‰æ·€:                           â”‚  â”‚
â”‚  â”‚                                     â”‚  â”‚
â”‚  â”‚ æ­£ä¸š (å–„ç§å­):                       â”‚  â”‚
â”‚  â”‚   - æˆåŠŸç»éªŒ â†’ notepads/learnings   â”‚  â”‚
â”‚  â”‚   - å†³ç­–é”šç‚¹ â†’ context/anchors      â”‚  â”‚
â”‚  â”‚   - å¯å¤ç”¨æ¨¡å¼ â†’ skills/            â”‚  â”‚
â”‚  â”‚                                     â”‚  â”‚
â”‚  â”‚ æ¶ä¸š (å¾…å¿å€º):                       â”‚  â”‚
â”‚  â”‚   - æŠ€æœ¯å€º â†’ issues.md              â”‚  â”‚
â”‚  â”‚   - å·²çŸ¥é£é™© â†’ risk-hotspots        â”‚  â”‚
â”‚  â”‚   - ä¸´æ—¶æ–¹æ¡ˆ â†’ tech-debt-tracker    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æµæ°´çº¿è§¦å‘æ—¶æœº

| è½¨é“ | è§¦å‘ä½ç½® | éªŒè¯æ·±åº¦ |
|------|----------|----------|
| Feature (Track A) | Phase 4â†’5 ä¹‹é—´ | å®Œæ•´æµæ°´çº¿ |
| Fix (Track B) | Phase 3â†’4 ä¹‹é—´ | æˆ’+å®šå…³ä¸ºä¸» |
| Refactor (Track C) | Phase 4â†’5 ä¹‹é—´ | é‡ç‚¹æ£€æŸ¥è¡Œä¸ºä¸å˜ |
| Direct (Track D) | åˆ†èº«è¿”å›å | è½»é‡çº§æ£€æŸ¥ |

### æµæ°´çº¿å¤±è´¥å¤„ç†

```
éªŒè¯å¤±è´¥æ—¶:
â”œâ”€â”€ æœ«é‚£è¯†æ ‡è®°å‡è®¾ â†’ è¿”å›å…­æ ¹ï¼Œè¦æ±‚éªŒè¯å‡è®¾
â”œâ”€â”€ æˆ’å…³è¿å â†’ è¿”å›å…­æ ¹ï¼Œä¿®æ­£è¾“å‡ºæ ¼å¼/è¾¹ç•Œ
â”œâ”€â”€ å®šå…³å¤±è´¥ â†’ è¿”å›èº«åˆ†èº«ï¼Œè¡¥å……éªŒè¯å‘½ä»¤
â””â”€â”€ æ…§å…³æœªè¾¾æ ‡ â†’ æœ¬ä½“å†³å®šæ˜¯å¦æ¥å— L2 é™çº§
```

---

### Track B: Bug Fix (é—®é¢˜ä¿®å¤)

**Trigger**: "Fix", "Bug", "Error", "Crash", "Issue"

**Default DAG**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: å®šä½+å®¡æŸ¥ (å¹¶è¡Œ)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚ ğŸ‘ çœ¼    â”‚    â”‚ ğŸ‘ƒ é¼»    â”‚  â† å¯å¹¶è¡Œï¼šæ¢ç´¢ç°çŠ¶ + å®¡æŸ¥é—®é¢˜ä»£ç      â”‚
â”‚  â”‚ é—®é¢˜å®šä½  â”‚    â”‚ æ ¹å› åˆ†æ  â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                      â”‚
â”‚       â”‚              â”‚                                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚              â–¼                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 2: ä¿®å¤ (ä¸²è¡Œ)                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ âš”ï¸ èº«    â”‚  â† ä¾èµ–å®šä½ç»“æœï¼Œæ— éœ€å®Œæ•´è®¾è®¡             â”‚
â”‚              â”‚ ä»£ç ä¿®å¤  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 3: å›å½’æµ‹è¯• (ä¸²è¡Œ)                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸ‘… èˆŒ    â”‚  â† æ·»åŠ å¤ç°ç”¨ä¾‹ + å›å½’æµ‹è¯•                â”‚
â”‚              â”‚ æµ‹è¯•éªŒè¯  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 4: å¤ç›˜ (å¯é€‰)                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸ”® å†…è§‚  â”‚  â† å¤æ‚ bug å»ºè®®å¤ç›˜ï¼Œæå–ç»éªŒ            â”‚
â”‚              â”‚ ç»éªŒæ²‰æ·€  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Gate è¦æ±‚**: L2 + å¤ç°ç”¨ä¾‹ + å›å½’æµ‹è¯•é€šè¿‡

---

### Track C: Refactoring (ä»£ç é‡æ„)

**Trigger**: "Refactor", "Clean", "Modernize", "Optimize"

**Default DAG**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: ç°çŠ¶åˆ†æ (ä¸²è¡Œ)                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸ‘ çœ¼    â”‚  â† åˆ†æç°çŠ¶ã€è€¦åˆå…³ç³»ã€ä¾èµ–å›¾             â”‚
â”‚              â”‚ ç°çŠ¶&è€¦åˆ â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 2: é‡æ„ç­–ç•¥ (ä¸²è¡Œ)                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸ§  æ„    â”‚  â† åˆ¶å®šé‡æ„ç­–ç•¥ï¼ˆä¸æ˜¯å®Œæ•´æ¶æ„è®¾è®¡ï¼‰        â”‚
â”‚              â”‚ é‡æ„ç­–ç•¥  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â° [Alaya T2] ç­–ç•¥å†»ç»“åæ³¨å…¥                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æŸ¥è¯¢é˜¿èµ–è€¶è¯†:                                                  â”‚ â”‚
â”‚  â”‚ - æå–é‡æ„ç­–ç•¥ä¸­çš„æŠ€æœ¯é€‰å‹ â†’ æ£€ç´¢ç›¸å…³ ADR [D ç±»å‹]             â”‚ â”‚
â”‚  â”‚ - æ³¨å…¥: å†å²å†³ç­–ã€å·²çŸ¥ Tradeoffã€å›æ»šç»éªŒ                      â”‚ â”‚
â”‚  â”‚ - å­—æ•°é™åˆ¶: â‰¤400å­—                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  è¯¦è§: .wukong/skills/alaya-injection.md                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 3: å®æ–½ (ä¸²è¡Œ)                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ âš”ï¸ èº«    â”‚  â† æŒ‰ç­–ç•¥å®æ–½ï¼Œä¿æŒè¡Œä¸ºä¸å˜               â”‚
â”‚              â”‚ ä»£ç é‡æ„  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚
â”‚                   â–¼                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 4: éªŒè¯ (å¹¶è¡Œ)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚ ğŸ‘ƒ é¼»    â”‚    â”‚ ğŸ‘… èˆŒ    â”‚  â† å¯å¹¶è¡Œï¼šå¯ç»´æŠ¤æ€§å®¡æŸ¥ + å›å½’æµ‹è¯•    â”‚
â”‚  â”‚ å¯ç»´æŠ¤æ€§  â”‚    â”‚ å›å½’æµ‹è¯•  â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                      â”‚
â”‚       â”‚              â”‚                                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚              â–¼                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 5: Gate                                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚              â”‚ ğŸµ æœ¬ä½“  â”‚  â† éªŒè¯è¡Œä¸ºä¸å˜ + è´¨é‡æå‡                â”‚
â”‚              â”‚ è¡Œä¸ºå¯¹é½  â”‚                                          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Gate è¦æ±‚**: L2 + è¡Œä¸ºä¸å˜è¯æ˜ï¼ˆå‰åè¾“å‡ºä¸€è‡´ï¼‰

---

### Track D: Direct (ç›´æ¥æ‰§è¡Œ)

**Trigger**: ç®€å•å‘½ä»¤ã€ç”¨æˆ·æ˜¾å¼å¬å”¤ (@è¯­æ³•)

**Default DAG**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ˜¾å¼å¬å”¤åˆ†èº« â†’ åˆ†èº«æ‰§è¡Œ â†’ ä»å¿…é¡»èµ°éªŒè¯ Gate                   â”‚
â”‚                                                                   â”‚
â”‚  @çœ¼ æ¢ç´¢X â†’ ğŸ‘ çœ¼åˆ†èº« â†’ è¿”å›æ¢ç´¢æŠ¥å‘Š                              â”‚
â”‚  @æ„ è®¾è®¡X â†’ ğŸ§  æ„åˆ†èº« â†’ è¿”å›è®¾è®¡æ–‡æ¡£                              â”‚
â”‚  @èº« å®ç°X â†’ âš”ï¸ æ–—æˆ˜èƒœä½› â†’ è¿”å›å®ç°æŠ¥å‘Š â†’ Gate éªŒè¯               â”‚
â”‚                                                                   â”‚
â”‚  æ³¨æ„: å³ä½¿ç›´æ¥å¬å”¤ï¼Œå®ç°ç±»ä»»åŠ¡ä»å¿…é¡»é€šè¿‡ L1+ éªŒè¯                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Gate è¦æ±‚**: L1ï¼ˆç®€å•ä»»åŠ¡å¯é™çº§ï¼Œä½†ä»éœ€è¯æ®ï¼‰

---

### DAG é€‰æ‹©å†³ç­–æ ‘

```
ç”¨æˆ·è¯·æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â° [Alaya T1] ä»»åŠ¡å¯åŠ¨å‰æ³¨å…¥                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æŸ¥è¯¢é˜¿èµ–è€¶è¯†:                                                 â”‚ â”‚
â”‚ â”‚ - æå–å…³é”®è¯ â†’ æ£€ç´¢ç›¸å…³é”šç‚¹ [P/C/M ç±»å‹]                      â”‚ â”‚
â”‚ â”‚ - æ³¨å…¥: é£é™©æ ‡ç­¾ã€çº¦æŸæé†’ã€Anti-pattern                      â”‚ â”‚
â”‚ â”‚ - å­—æ•°é™åˆ¶: â‰¤300å­—                                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ è¯¦è§: .wukong/skills/alaya-injection.md                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ˜¯å¦ä½¿ç”¨ @ æ˜¾å¼å¬å”¤åˆ†èº«ï¼Ÿ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ YES â†’ Track D (Direct)
    â”‚
    â–¼ NO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…³é”®è¯è¯†åˆ«                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Add/Create/New/Feature"  â†’ Track A (Feature)
â”‚ "Fix/Bug/Error/Crash"     â†’ Track B (Fix)
â”‚ "Refactor/Clean/Optimize" â†’ Track C (Refactor)
â”‚ å…¶ä»–ç®€å•ä»»åŠ¡               â†’ Track D (Direct)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Conflict Arbitration Protocol (å†²çªä»²è£åè®®)

> **å¤š agent æœ€å¸¸è§æƒ…å†µï¼šåˆ†èº«æ„è§ä¸ä¸€è‡´** - å¿…é¡»æœ‰æ˜ç¡®çš„ä»²è£è§„åˆ™ã€‚

### å¸¸è§å†²çªåœºæ™¯

```
å†²çªç±»å‹ç¤ºä¾‹ï¼š
â”œâ”€â”€ ğŸ§ æ„ è¯´: "è¿™æ ·è®¾è®¡æ›´ä¼˜é›…"
â”œâ”€â”€ ğŸ‘ƒé¼» è¯´: "é£é™©å¤ªå¤§ï¼Œå®‰å…¨éšæ‚£"
â”œâ”€â”€ âš”ï¸èº« è¯´: "å®ç°æˆæœ¬å¤ªé«˜"
â””â”€â”€ ğŸ‘…èˆŒ è¯´: "è¿™ä¸ªæ–¹æ¡ˆæµ‹ä¸äº†"
```

### å†²çªå¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: å†²çªæ˜¾å¼åŒ–                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è°        â”‚ è§‚ç‚¹                    â”‚ è¯æ®                  â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ ğŸ§ æ„      â”‚ ä½¿ç”¨å¾®æœåŠ¡æ¶æ„           â”‚ å¯æ‰©å±•æ€§å¥½            â”‚ â”‚
â”‚  â”‚ ğŸ‘ƒé¼»      â”‚ å•ä½“æ›´å®‰å…¨               â”‚ å‡å°‘ç½‘ç»œæ”»å‡»é¢        â”‚ â”‚
â”‚  â”‚ âš”ï¸èº«      â”‚ å•ä½“å®ç°æˆæœ¬ä½           â”‚ å·¥æ—¶ä¼°ç®—: 2å¤© vs 2å‘¨  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 2: æœ¬ä½“æŒ‰ä¼˜å…ˆçº§è£å†³                                        â”‚
â”‚                                                                   â”‚
â”‚  è£å†³ä¸‰å‡†åˆ™ (æŒ‰ä¼˜å…ˆçº§æ’åº):                                       â”‚
â”‚                                                                   â”‚
â”‚  1ï¸âƒ£ æ»¡è¶³ AC ä¼˜å…ˆ                                                â”‚
â”‚     â†’ å“ªä¸ªæ–¹æ¡ˆèƒ½æ»¡è¶³éªŒæ”¶æ ‡å‡†ï¼Ÿä¸æ»¡è¶³ AC çš„æ–¹æ¡ˆç›´æ¥æ’é™¤             â”‚
â”‚                                                                   â”‚
â”‚  2ï¸âƒ£ é£é™©å¯æ§ä¼˜å…ˆ                                                â”‚
â”‚     â†’ å®‰å…¨/æ•°æ®ä¸¢å¤±/ä¸å¯é€† é£é™©å¿…é¡»ä¼˜å…ˆè€ƒè™‘                       â”‚
â”‚     â†’ å®å¯ç‰ºç‰²ä¼˜é›…ï¼Œä¸å¯ç‰ºç‰²å®‰å…¨                                  â”‚
â”‚                                                                   â”‚
â”‚  3ï¸âƒ£ æœ€å°æ”¹åŠ¨ä¼˜å…ˆ                                                â”‚
â”‚     â†’ å°¤å…¶ Fix è½¨é“ï¼Œèƒ½å°æ”¹ä¸å¤§æ”¹                                 â”‚
â”‚     â†’ é¿å…è¿‡åº¦å·¥ç¨‹                                                â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 3: è¾“å‡º Decision Log (å†³ç­–æ—¥å¿—)                            â”‚
â”‚                                                                   â”‚
â”‚  ```markdown                                                      â”‚
â”‚  ## Decision Log: {decision_id}                                   â”‚
â”‚                                                                   â”‚
â”‚  **æ—¥æœŸ**: {date}                                                 â”‚
â”‚  **å†²çª**: {æè¿°å†²çª}                                             â”‚
â”‚                                                                   â”‚
â”‚  **å„æ–¹è§‚ç‚¹**:                                                    â”‚
â”‚  - ğŸ§ æ„: {è§‚ç‚¹} (è¯æ®: {evidence})                                â”‚
â”‚  - ğŸ‘ƒé¼»: {è§‚ç‚¹} (è¯æ®: {evidence})                                â”‚
â”‚  - âš”ï¸èº«: {è§‚ç‚¹} (è¯æ®: {evidence})                                â”‚
â”‚                                                                   â”‚
â”‚  **è£å†³**: {æœ€ç»ˆå†³å®š}                                             â”‚
â”‚  **ä¾æ®**: {å“ªæ¡å‡†åˆ™}                                             â”‚
â”‚  **å½±å“**: {å½±å“èŒƒå›´}                                             â”‚
â”‚  **é”šç‚¹**: [D0xx] {ç®€çŸ­æè¿°}                                      â”‚
â”‚  ```                                                              â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 4: é”šç‚¹åŒ– (ä¸‹æ¬¡ç›´æ¥å¤ç”¨)                                    â”‚
â”‚                                                                   â”‚
â”‚  è£å†³ååˆ›å»ºå†³ç­–é”šç‚¹:                                              â”‚
â”‚  [D0xx] {å†³ç­–} - åŸºäº{å‡†åˆ™}ï¼Œé€‰æ‹©{æ–¹æ¡ˆ}è€Œé{å¤‡é€‰}                 â”‚
â”‚                                                                   â”‚
â”‚  ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼å†²çªï¼Œç›´æ¥å¼•ç”¨é”šç‚¹ï¼Œä¸é‡å¤è®¨è®º                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»²è£è§„åˆ™é€ŸæŸ¥

| å†²çªç±»å‹ | è£å†³å‡†åˆ™ | ç¤ºä¾‹ |
|----------|----------|------|
| è®¾è®¡ä¼˜é›… vs å®‰å…¨é£é™© | 2ï¸âƒ£ é£é™©å¯æ§ä¼˜å…ˆ | é€‰å®‰å…¨æ–¹æ¡ˆ |
| åŠŸèƒ½å®Œæ•´ vs äº¤ä»˜æ—¶é—´ | 1ï¸âƒ£ æ»¡è¶³ AC ä¼˜å…ˆ | AC æœªè¦†ç›–çš„åŠŸèƒ½å¯å»¶å |
| å¤§é‡æ„ vs å°ä¿®è¡¥ | 3ï¸âƒ£ æœ€å°æ”¹åŠ¨ä¼˜å…ˆ | Fix è½¨é“é€‰å°ä¿®è¡¥ |
| æ€§èƒ½ä¼˜åŒ– vs ä»£ç å¯è¯» | 1ï¸âƒ£ æ»¡è¶³ AC ä¼˜å…ˆ | è‹¥ AC æ— æ€§èƒ½è¦æ±‚ï¼Œé€‰å¯è¯» |
| æ–°æŠ€æœ¯ vs æˆç†Ÿæ–¹æ¡ˆ | 2ï¸âƒ£ é£é™©å¯æ§ä¼˜å…ˆ | é™¤éæœ‰æ˜ç¡®æ”¶ç›Šï¼Œé€‰æˆç†Ÿæ–¹æ¡ˆ |

### ç¦æ­¢çš„ä»²è£è¡Œä¸º

```
âŒ ç¦æ­¢:
â”œâ”€â”€ å’Œç¨€æ³¥ï¼ˆ"ä¸¤è¾¹éƒ½æœ‰é“ç†ï¼Œä½ ä»¬è‡ªå·±çœ‹ç€åŠ"ï¼‰
â”œâ”€â”€ æ— è¯æ®è£å†³ï¼ˆ"æˆ‘è§‰å¾—åº”è¯¥..."ï¼‰
â”œâ”€â”€ æ‹–å»¶è£å†³ï¼ˆ"ä¸‹æ¬¡å†è¯´"ï¼‰
â”œâ”€â”€ è£å†³åä¸è®°å½•ï¼ˆä¸‹æ¬¡é‡å¤è®¨è®ºï¼‰
â””â”€â”€ æ¨ç¿»å·²è®°å½•çš„é”šç‚¹ï¼ˆé™¤éæœ‰æ–°çš„å¼ºè¯æ®ï¼‰
```

### Stage 1: éœ€æ±‚è·å– (Requirement Gathering)

```
Input: ç”¨æˆ·è¯·æ±‚
Avatar: ğŸ‘‚ è€³åˆ†èº« (å¬)

Tasks:
1. è§£ææ˜¾å¼éœ€æ±‚
2. æ¨å¯¼éšå¼éœ€æ±‚
3. è¯†åˆ«è¾¹ç•Œæ¡ä»¶
4. ç¡®è®¤æŠ€æœ¯çº¦æŸ

Output: requirements.md
```

### Stage 2: æ–¹æ¡ˆè®¾è®¡ (Solution Design)

```
Input: requirements.md
Avatar: ğŸ§  æ„åˆ†èº« (æ€)

Tasks:
1. åˆ†æç°æœ‰æ¶æ„
2. è®¾è®¡è§£å†³æ–¹æ¡ˆ
3. æŠ€æœ¯é€‰å‹
4. è¯†åˆ«é£é™©

Output: design.md
```

### Stage 3: ä»£ç å®ç° (Implementation)

```
Input: design.md
Avatar: âš”ï¸ æ–—æˆ˜èƒœä½› (è¡Œ) + ğŸ‘ï¸ çœ¼åˆ†èº« (è§‚) (parallel)

Tasks:
1. çœ¼åˆ†èº«: ç ”ç©¶ç›¸å…³ä»£ç  (background)
2. æ–—æˆ˜èƒœä½›: æŒ‰è®¾è®¡å®ç°ä»£ç 
3. æœ¬ä½“: ç›‘ç£è¿›åº¦ï¼Œå›ç­”é—®é¢˜
4. å¢é‡éªŒè¯

Output: ä»£ç å˜æ›´
```

### Stage 4: æµ‹è¯•éªŒè¯ (Testing)

```
Input: ä»£ç å˜æ›´
Avatar: ğŸ‘… èˆŒåˆ†èº« (è¨€)

Tasks:
1. ç¼–å†™å•å…ƒæµ‹è¯•
2. ç¼–å†™é›†æˆæµ‹è¯•
3. éªŒè¯è¾¹ç•Œæ¡ä»¶
4. æ£€æŸ¥è¦†ç›–ç‡

Output: æµ‹è¯•é€šè¿‡
```

### Stage 5: ä»£ç å®¡æŸ¥ (Code Review)

```
Input: ä»£ç å˜æ›´ + æµ‹è¯•
Avatar: ğŸ‘ƒ é¼»åˆ†èº« (è§‰)

Tasks:
1. æ£€æŸ¥ä»£ç è´¨é‡
2. éªŒè¯è®¾è®¡ä¸€è‡´æ€§
3. è¯†åˆ«æ½œåœ¨é—®é¢˜
4. æå‡ºæ”¹è¿›å»ºè®®

Output: review.md
```

## Resume Protocol (ç»§ç»­åè®®)

| Scenario | Action |
|----------|--------|
| ä¸Šæ¬¡æœç´¢æœªå®Œæˆ | `resume: "<agent_id>"` |
| éœ€è¦è¡¥å……ä¹‹å‰çš„å‘ç° | `resume: "<agent_id>"` |
| å®Œå…¨ä¸åŒçš„ä»»åŠ¡ | é‡æ–°å¼€å§‹ |
| ä¸Šä¸‹æ–‡è¿‡æœŸ (>30 min) | é‡æ–°å¼€å§‹ |
