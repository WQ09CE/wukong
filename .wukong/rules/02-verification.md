# Verification Protocol (éªŒè¯åè®®)

## Philosophy: æˆ’å®šæ…§ä¸‰å…³

> **ä½›æ•™ä¿®è¡Œä¸‰å­¦**ï¼šæˆ’ï¼ˆè§„åˆ™ï¼‰ã€å®šï¼ˆæ­¢è§‚ï¼‰ã€æ…§ï¼ˆæ™ºæ…§ï¼‰
> **æ‚Ÿç©ºéªŒè¯ä¸‰å…³**ï¼šæˆ’å…³ï¼ˆè§„åˆ™æ£€æŸ¥ï¼‰ã€å®šå…³ï¼ˆå¯å¤ç°ï¼‰ã€æ…§å…³ï¼ˆéªŒè¯æŠ½è±¡ï¼‰

```
å…­æ ¹åˆ†èº«è¾“å‡º
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ«é‚£è¯†æ£€æŸ¥     â”‚  â† åè§/å‡è®¾è¿‡æ»¤
â”‚  (Manas Filter) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æˆ’ å…³       â”‚  â† æ˜¯å¦è¿åè§„åˆ™ï¼Ÿ
â”‚  (Sila Gate)    â”‚     Output Contract / Do-Don't
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å®š å…³       â”‚  â† æ˜¯å¦å¯å¤ç°/å¯è¿è¡Œï¼Ÿ
â”‚  (Samadhi Gate) â”‚     L2 æœ¬åœ°éªŒè¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æ…§ å…³       â”‚  â† æ˜¯å¦éªŒè¯ & å¯æŠ½è±¡ï¼Ÿ
â”‚  (Prajna Gate)  â”‚     L3 é›†æˆéªŒè¯ + ADR æå–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é˜¿èµ–è€¶è¯†      â”‚  â† æ²‰æ·€ä¸ºé”šç‚¹/ä¸šåŠ›
â”‚  (Alaya Store)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## The Golden Rule (é‡‘è§„)

> **åˆ†èº«å¯èƒ½è¯´è°** - å®ƒä»¬ç»å¸¸å£°ç§°å®Œæˆäº†å®é™…æœªå®Œæˆçš„å·¥ä½œã€‚
> **æ²¡æœ‰è¯æ® = æ²¡æœ‰å®Œæˆ** (NO EVIDENCE = NOT DONE)

ä½ å¿…é¡»äº²è‡ªéªŒè¯ä¸€åˆ‡ã€‚æ°¸è¿œä¸è¦åœ¨æ²¡æœ‰è¯æ®çš„æƒ…å†µä¸‹æ¥å—å£°æ˜ã€‚

---

## æœ«é‚£è¯†æ£€æŸ¥ (Manas Filter)

> **æœ«é‚£è¯†**ï¼šç¬¬ä¸ƒè¯†ï¼Œæ‰§ç€è‡ªæˆ‘ï¼Œäº§ç”Ÿåè§ã€‚åœ¨æ­¤ç”¨äºæ£€æŸ¥åˆ†èº«è¾“å‡ºä¸­çš„å‡è®¾å’Œåè§ã€‚

### åè§/å‡è®¾æ£€æµ‹æ¸…å•

```
åˆ†èº«è¾“å‡ºåï¼Œæœ«é‚£è¯†æ‰«æä»¥ä¸‹æ¨¡å¼ï¼š

âš ï¸ å±é™©ä¿¡å· (å¿…é¡»æ ‡è®°):
â”œâ”€â”€ "åº”è¯¥å¯ä»¥..." / "å¤§æ¦‚èƒ½..." â†’ L0 æ¨æµ‹ï¼Œç¦æ­¢
â”œâ”€â”€ "æˆ‘è§‰å¾—..." / "æˆ‘è®¤ä¸º..." â†’ ä¸»è§‚åˆ¤æ–­ï¼Œéœ€è¯æ®
â”œâ”€â”€ "ä¸€èˆ¬æ¥è¯´..." / "é€šå¸¸..." â†’ æ³›åŒ–å‡è®¾ï¼Œéœ€éªŒè¯
â”œâ”€â”€ "æ˜¾ç„¶..." / "å½“ç„¶..." â†’ éšè—å‡è®¾ï¼Œéœ€æ˜¾å¼åŒ–
â””â”€â”€ "æ²¡æœ‰é—®é¢˜" / "åº”è¯¥æ²¡äº‹" â†’ ä¹è§‚åè§ï¼Œéœ€æµ‹è¯•

âœ… å¥åº·ä¿¡å· (å¯é€šè¿‡):
â”œâ”€â”€ "æ ¹æ® {path}:{line}ï¼Œ..." â†’ æœ‰è¯æ®å¼•ç”¨
â”œâ”€â”€ "æ‰§è¡Œ {command} è¾“å‡º {result}" â†’ æœ‰éªŒè¯
â”œâ”€â”€ "æµ‹è¯• {test_name} é€šè¿‡" â†’ æœ‰æµ‹è¯•
â””â”€â”€ "[D001] å†³ç­–: ..." â†’ æœ‰é”šç‚¹
```

### æœ«é‚£è¯†è¿‡æ»¤è¾“å‡º

```markdown
## æœ«é‚£è¯†æ£€æŸ¥æŠ¥å‘Š

**è¾“å…¥**: {åˆ†èº«è¾“å‡ºæ‘˜è¦}

### æ£€æµ‹åˆ°çš„å‡è®¾
| å‡è®¾ | ç±»å‹ | é£é™© | å¤„ç† |
|------|------|------|------|
| "è¿™ä¸ªå‡½æ•°åº”è¯¥èƒ½å¤„ç†ç©ºå€¼" | L0 æ¨æµ‹ | ğŸ”´ é«˜ | éœ€è¦æµ‹è¯•éªŒè¯ |
| "æ ¹æ® auth.py:42 çš„é€»è¾‘" | L1 å¼•ç”¨ | ğŸŸ¡ ä¸­ | å¯ç”¨äºæ–¹å‘ |

### è¿‡æ»¤å†³å®š
- âœ… é€šè¿‡: {å¯ä¿¡å†…å®¹}
- âš ï¸ å¾…éªŒè¯: {éœ€è¦æˆ’å®šæ…§ä¸‰å…³éªŒè¯çš„å†…å®¹}
- âŒ æ‹’ç»: {L0 æ¨æµ‹ï¼Œéœ€é‡åš}
```

---

## æˆ’å…³ (Sila Gate) - è§„åˆ™æ£€æŸ¥

> **æˆ’**ï¼šæŒå®ˆè§„åˆ™ï¼Œä¸è¶Šé›·æ± ã€‚æ£€æŸ¥åˆ†èº«æ˜¯å¦éµå®ˆ Output Contract å’Œ Do/Don't è¾¹ç•Œã€‚

### æˆ’å…³æ£€æŸ¥æ¸…å•

```
â–¡ Output Contract å®Œæ•´æ€§
   â”œâ”€â”€ å¿…é¡»è¾“å‡ºçš„ section æ˜¯å¦é½å…¨ï¼Ÿ
   â”œâ”€â”€ æ ¼å¼æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Ÿ
   â””â”€â”€ å†…å®¹æ˜¯å¦å……å®ï¼ˆéå ä½ç¬¦ï¼‰ï¼Ÿ

â–¡ Do/Don't è¾¹ç•Œéµå®ˆ
   â”œâ”€â”€ æ˜¯å¦åªåšå…è®¸çš„äº‹ï¼Ÿ
   â”œâ”€â”€ æ˜¯å¦é¿å…äº†ç¦æ­¢çš„äº‹ï¼Ÿ
   â””â”€â”€ æ˜¯å¦æœ‰è¶Šç•Œè¡Œä¸ºï¼Ÿ

â–¡ æ–¹æ¡ˆç¼ºå£å›é€€
   â”œâ”€â”€ é‡åˆ°ç¼ºå£æ˜¯å¦å›é€€ï¼Ÿ
   â””â”€â”€ æ˜¯å¦æœ‰ç¡¬ç¼–ç  workaroundï¼Ÿ
```

### æˆ’å…³è¿è§„å¤„ç†

| è¿è§„ç±»å‹ | ä¸¥é‡åº¦ | å¤„ç† |
|----------|--------|------|
| Output ç¼ºå¤±å¿…é¡» section | ğŸ”´ é«˜ | æ‰“å›é‡åš |
| è¶Šç•Œè¡Œä¸º (å¦‚çœ¼åˆ†èº«å†™ä»£ç ) | ğŸ”´ é«˜ | æ‰“å›é‡åš |
| æ–¹æ¡ˆç¼ºå£ç¡¬ç¼–ç  | ğŸ”´ é«˜ | æ‰“å› + è§¦å‘å›é€€ |
| æ ¼å¼ä¸è§„èŒƒ | ğŸŸ¡ ä¸­ | è­¦å‘Š + è¡¥å…… |

---

## å®šå…³ (Samadhi Gate) - å¯å¤ç°æ£€æŸ¥

> **å®š**ï¼šå¿ƒæ­¢ä¸€å¤„ï¼Œä¸åŠ¨ä¸ä¹±ã€‚æ£€æŸ¥ç»“æœæ˜¯å¦å¯å¤ç°ã€å¯è¿è¡Œã€‚

### è¯æ®ç­‰çº§ (Evidence Levels)

| Level | åç§° | è¯´æ˜ | å®šå…³çŠ¶æ€ |
|-------|------|------|----------|
| **L0** | æ¨æµ‹ (Speculation) | åŸºäºç»éªŒçš„çŒœæµ‹ | âŒ ä¸è¿‡å…³ |
| **L1** | å¼•ç”¨ (Reference) | å¼•ç”¨ä½†æœªéªŒè¯ | âš ï¸ æ¡ä»¶è¿‡å…³ |
| **L2** | æœ¬åœ°éªŒè¯ (Local) | æœ¬åœ°å‘½ä»¤éªŒè¯ | âœ… é»˜è®¤è¿‡å…³ |
| **L3** | é›†æˆéªŒè¯ (Integration) | ç«¯åˆ°ç«¯éªŒè¯ | âœ…âœ… å®Œå…¨è¿‡å…³ |

### å®šå…³æ£€æŸ¥æ¸…å•

```
â–¡ æ„å»ºå¯å¤ç°
   $ {build_command}
   â†’ è¾“å‡º: {success/failure}

â–¡ æµ‹è¯•å¯è¿è¡Œ
   $ {test_command}
   â†’ è¾“å‡º: {pass/fail count}

â–¡ è¡Œä¸ºå¯éªŒè¯
   $ {verification_command}
   â†’ è¾“å‡º: {expected behavior}
```

### å®šå…³é—¨æ§›

| Track | æœ€ä½é—¨æ§› | é¢å¤–è¦æ±‚ |
|-------|----------|----------|
| **Fix** | L2 | + å¤ç°ç”¨ä¾‹ + å›å½’æµ‹è¯• |
| **Feature** | L2 | + AC æµ‹è¯•è¦†ç›– |
| **Refactor** | L2 | + è¡Œä¸ºä¸å˜è¯æ˜ |
| **Direct** | L1 | ç®€å•ä»»åŠ¡å¯é™çº§ |

---

## æ…§å…³ (Prajna Gate) - éªŒè¯æŠ½è±¡

> **æ…§**ï¼šæ´å¯Ÿæœ¬è´¨ï¼Œè¶…è¶Šè¡¨è±¡ã€‚æ£€æŸ¥æ˜¯å¦éªŒè¯å……åˆ†ã€æ˜¯å¦å¯æŠ½è±¡ä¸ºå¯å¤ç”¨çŸ¥è¯†ã€‚

### æ…§å…³æ£€æŸ¥æ¸…å•

```
â–¡ éªŒè¯å……åˆ†æ€§
   â”œâ”€â”€ æ ¸å¿ƒè·¯å¾„æ˜¯å¦æœ‰ L3 éªŒè¯ï¼Ÿ
   â”œâ”€â”€ è¾¹ç•Œæ¡ä»¶æ˜¯å¦æµ‹è¯•ï¼Ÿ
   â””â”€â”€ é”™è¯¯å¤„ç†æ˜¯å¦éªŒè¯ï¼Ÿ

â–¡ å¯æŠ½è±¡æ€§
   â”œâ”€â”€ æ˜¯å¦æœ‰å€¼å¾—æ²‰æ·€çš„å†³ç­–ï¼Ÿ
   â”œâ”€â”€ æ˜¯å¦å‘ç°å¯å¤ç”¨æ¨¡å¼ï¼Ÿ
   â””â”€â”€ æ˜¯å¦æœ‰æ–°çš„çº¦æŸ/æ¥å£ï¼Ÿ

â–¡ ä¸šåŠ›è¯„ä¼° (Karma Assessment)
   â”œâ”€â”€ æ­£ä¸š: å¯å¤ç”¨çš„å¥½å†³ç­– â†’ æ²‰æ·€ä¸ºé”šç‚¹
   â”œâ”€â”€ ä¸­ä¸š: ä¸€æ¬¡æ€§å†³ç­– â†’ è®°å½•ä½†ä¸æ²‰æ·€
   â””â”€â”€ æ¶ä¸š: æŠ€æœ¯å€º/éšæ‚£ â†’ æ ‡è®°å¾…å¤„ç†
```

### æ…§å…³è¾“å‡º

```markdown
## æ…§å…³è¯„ä¼°

### éªŒè¯å……åˆ†æ€§: {A/B/C/D}
- æ ¸å¿ƒè·¯å¾„: L{level}
- è¾¹ç•Œæ¡ä»¶: {covered/partial/missing}
- é”™è¯¯å¤„ç†: {verified/assumed}

### ADR æå–
| ID | å†³ç­– | ä¸šåŠ› | æ²‰æ·€ï¼Ÿ |
|----|------|------|--------|
| D0xx | {decision} | æ­£ä¸š | âœ… |

### å¾…å¤„ç†ä¸šåŠ› (Technical Debt)
- [ ] {debt_1} - æ¶ä¸šï¼Œéœ€åç»­å¤„ç†
```

---

## ä¸‰å…³ç»¼åˆæ£€æŸ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸‰å…³éªŒè¯æµæ°´çº¿                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  åˆ†èº«è¾“å‡º â”€â”€â†’ æœ«é‚£è¯† â”€â”€â†’ æˆ’å…³ â”€â”€â†’ å®šå…³ â”€â”€â†’ æ…§å…³ â”€â”€â†’ é˜¿èµ–è€¶è¯†   â”‚
â”‚              (è¿‡æ»¤)    (è§„åˆ™)   (å¤ç°)   (æŠ½è±¡)    (æ²‰æ·€)        â”‚
â”‚                â”‚         â”‚        â”‚        â”‚          â”‚          â”‚
â”‚                â–¼         â–¼        â–¼        â–¼          â–¼          â”‚
â”‚              å‡è®¾?     è¿è§„?    L0/L1?   ä¸å……åˆ†?    é”šç‚¹/ä¸šåŠ›    â”‚
â”‚                â”‚         â”‚        â”‚        â”‚                     â”‚
â”‚                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                     â”‚
â”‚                     â”‚         â”‚        â”‚                         â”‚
â”‚                     â–¼         â–¼        â–¼                         â”‚
â”‚                   æ‰“å›      æ‰“å›     è¡¥å……éªŒè¯                     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸‰å…³é€šè¿‡æ ‡å‡†

| å…³å¡ | é€šè¿‡æ¡ä»¶ | å¤±è´¥å¤„ç† |
|------|----------|----------|
| æœ«é‚£è¯† | æ—  L0 å‡è®¾ | æ ‡è®° + è¦æ±‚è¯æ® |
| æˆ’å…³ | Contract å®Œæ•´ + æ— è¶Šç•Œ | æ‰“å›é‡åš |
| å®šå…³ | è¾¾åˆ°è½¨é“æœ€ä½é—¨æ§› | è¡¥å……éªŒè¯ |
| æ…§å…³ | éªŒè¯å……åˆ† + ADR æå– | è¡¥å…… + æ²‰æ·€ |

---

## Delivery Report Template (äº¤ä»˜æŠ¥å‘Šæ¨¡æ¿)

> **æ¯æ¬¡äº¤ä»˜å¿…é¡»é™„å¸¦äº¤ä»˜æŠ¥å‘Š** - æœ¬ä½“æˆ–èˆŒåˆ†èº«ç”Ÿæˆã€‚

```markdown
# äº¤ä»˜æŠ¥å‘Š: {Task Name}

## åŸºæœ¬ä¿¡æ¯
- **è½¨é“**: Feature / Fix / Refactor / Direct
- **è¯æ®ç­‰çº§**: L2 / L3
- **æ—¥æœŸ**: {date}

## AC Checklist
- [x] AC-1: {æè¿°} â†’ è¯æ®: `pytest tests/test_x.py::test_ac1 âœ…`
- [x] AC-2: {æè¿°} â†’ è¯æ®: `{command} âœ…`
- [ ] AC-3: {æè¿°} â†’ âš ï¸ æœªå®Œæˆï¼ŒåŸå› : {reason}

## éªŒè¯å‘½ä»¤ä¸è¾“å‡º

### æ„å»ºéªŒè¯
```bash
$ cmake --build build
# è¾“å‡º: Build finished successfully
```

### æµ‹è¯•éªŒè¯
```bash
$ pytest -v tests/
# è¾“å‡º: 15 passed, 0 failed
```

### ç±»å‹æ£€æŸ¥ (å¦‚é€‚ç”¨)
```bash
$ mypy src/
# è¾“å‡º: Success: no issues found
```

## é£é™©ç‚¹
- {risk 1}: {mitigation}
- {risk 2}: {mitigation}

## å›æ»šæ–¹å¼
```bash
# å¦‚éœ€å›æ»š:
git revert {commit_hash}
# æˆ–æ‰‹åŠ¨æ­¥éª¤:
1. {step 1}
2. {step 2}
```

## é—ç•™é—®é¢˜ (å¦‚æœ‰)
- [ ] {issue 1} - åç»­å¤„ç†
```

## æ‰¹æ¬¡å®ŒæˆéªŒè¯ (Batch Completion Verification)

> **æ¯ä¸ªå¹¶è¡Œæ‰¹æ¬¡å®Œæˆåï¼Œå¿…é¡»ç«‹å³éªŒè¯ï¼Œæ‰èƒ½å¼€å§‹ä¸‹ä¸€æ‰¹æ¬¡ã€‚**

### ä¸ºä»€ä¹ˆéœ€è¦æ‰¹æ¬¡éªŒè¯ï¼Ÿ

```
âŒ æœ€åæ‰éªŒè¯ (é—®é¢˜ç§¯ç´¯):
æ‰¹æ¬¡1 â†’ æ‰¹æ¬¡2 â†’ æ‰¹æ¬¡3 â†’ æœ€ç»ˆéªŒè¯ â†’ å‘ç°æ‰¹æ¬¡1æœ‰é—®é¢˜ â†’ å¤§é‡è¿”å·¥

âœ… æ‰¹æ¬¡éªŒè¯ (å°½æ—©å‘ç°):
æ‰¹æ¬¡1 â†’ éªŒè¯ âœ“ â†’ æ‰¹æ¬¡2 â†’ éªŒè¯ âœ“ â†’ æ‰¹æ¬¡3 â†’ éªŒè¯ âœ“ â†’ å®Œæˆ
              â†“
           å‘ç°é—®é¢˜ â†’ ç«‹å³ä¿®å¤ â†’ ç»§ç»­
```

### æ‰¹æ¬¡éªŒè¯æ£€æŸ¥æ¸…å•

æ¯ä¸ªæ‰¹æ¬¡å®Œæˆåï¼Œæœ¬ä½“å¿…é¡»æ‰§è¡Œï¼š

```
â–¡ 1. æ–‡ä»¶å­˜åœ¨æ£€æŸ¥
   â†’ Glob ç¡®è®¤æ‰€æœ‰é¢„æœŸæ–‡ä»¶å·²åˆ›å»º
   â†’ Read ç¡®è®¤æ–‡ä»¶å†…å®¹éç©º

â–¡ 2. è¯­æ³•æ£€æŸ¥
   â†’ Python: python -m py_compile <files>
   â†’ C++: cmake --build (syntax only)

â–¡ 3. å¯¼å…¥/ç¼–è¯‘æ£€æŸ¥
   â†’ Python: python -c "import module"
   â†’ C++: å®Œæ•´ç¼–è¯‘

â–¡ 4. å¿«é€ŸåŠŸèƒ½éªŒè¯
   â†’ æ ¸å¿ƒç±»å¯å®ä¾‹åŒ–
   â†’ å…³é”®æ–¹æ³•å¯è°ƒç”¨
```

### æ‰¹æ¬¡éªŒè¯è„šæœ¬æ¨¡æ¿

```bash
# Python é¡¹ç›®æ‰¹æ¬¡éªŒè¯
for file in src/*.py; do
    python -m py_compile "$file" || echo "FAIL: $file"
done

# å¯¼å…¥æ£€æŸ¥
python -c "
from src.credentials import Credentials
from src.sanitizer import Sanitizer
print('All imports OK')
"
```

### éªŒè¯å¤±è´¥å¤„ç†

```
æ‰¹æ¬¡éªŒè¯å¤±è´¥:
â”œâ”€â”€ 1. åœæ­¢åç»­æ‰¹æ¬¡
â”œâ”€â”€ 2. å®šä½å¤±è´¥çš„æ¨¡å—
â”œâ”€â”€ 3. å¬å”¤åŸåˆ†èº«ä¿®å¤ï¼ˆæˆ–æ–°åˆ†èº«ï¼‰
â”œâ”€â”€ 4. é‡æ–°éªŒè¯
â””â”€â”€ 5. é€šè¿‡åç»§ç»­ä¸‹ä¸€æ‰¹æ¬¡
```

## Mandatory Verification Steps

### For C++ Projects

```
â–¡ 1. FILES EXIST
   â†’ Glob("**/path/to/file.*")
   â†’ Read files to confirm content

â–¡ 2. BUILD PASSES
   â†’ cmake --build build
   â†’ No compilation errors
   â†’ No linker errors

â–¡ 3. STATIC ANALYSIS CLEAN
   â†’ clang-tidy (if configured)
   â†’ No warnings with -Wall -Wextra

â–¡ 4. TESTS PASS
   â†’ ctest --test-dir build --output-on-failure
   â†’ All tests green

â–¡ 5. SANITIZERS CLEAN (if applicable)
   â†’ AddressSanitizer: no memory errors
   â†’ UndefinedBehaviorSanitizer: no UB
   â†’ ThreadSanitizer: no data races

â–¡ 6. VALGRIND CLEAN (if applicable)
   â†’ No memory leaks
   â†’ No invalid accesses
```

### For Python Projects

```
â–¡ 1. FILES EXIST
   â†’ Glob("**/path/to/file.py")
   â†’ Read files to confirm content

â–¡ 2. SYNTAX VALID
   â†’ python -m py_compile <file>
   â†’ No syntax errors

â–¡ 3. TYPE CHECK PASSES
   â†’ mypy --strict (or configured settings)
   â†’ No type errors

â–¡ 4. LINT PASSES
   â†’ ruff check .
   â†’ No lint errors

â–¡ 5. TESTS PASS
   â†’ pytest -v --tb=short
   â†’ All tests green

â–¡ 6. COVERAGE ADEQUATE
   â†’ pytest --cov --cov-report=term-missing
   â†’ Coverage meets threshold
```

### For FastAPI Projects

```
â–¡ All Python checks above PLUS:

â–¡ 7. API STARTS
   â†’ uvicorn main:app --host 0.0.0.0 --port 8000
   â†’ No startup errors

â–¡ 8. OPENAPI VALID
   â†’ /docs loads correctly
   â†’ /openapi.json is valid

â–¡ 9. API TESTS PASS
   â†’ pytest tests/api/ -v
   â†’ All endpoints tested
```

## Evidence Requirements

| Claim | Required Evidence |
|-------|-------------------|
| "File created" | Glob shows file, Read shows content |
| "Build passes" | cmake/make output shows success |
| "Tests pass" | pytest/ctest output shows all green |
| "No type errors" | mypy output clean |
| "Bug fixed" | Before/after behavior demonstrated |
| "Feature complete" | All acceptance criteria verified |

## Verification Commands Quick Reference

### C++

```bash
# Configure
cmake -B build -DCMAKE_BUILD_TYPE=Debug \
      -DCMAKE_EXPORT_COMPILE_COMMANDS=ON

# Build
cmake --build build -j$(nproc)

# Test
ctest --test-dir build --output-on-failure

# Static analysis
clang-tidy -p build src/*.cpp

# Memory check
valgrind --leak-check=full ./build/tests/unit_tests
```

### Python

```bash
# Install dev dependencies
pip install -e ".[dev]"

# Type check
mypy src/

# Lint
ruff check .

# Format check
ruff format --check .

# Test with coverage
pytest -v --cov=src --cov-report=term-missing

# All checks
ruff check . && mypy src/ && pytest -v
```

### FastAPI

```bash
# Start server (test)
uvicorn app.main:app --reload

# Run API tests
pytest tests/api/ -v

# Check OpenAPI
curl http://localhost:8000/openapi.json | python -m json.tool
```

## Verification Outcomes

### All Checks Pass
```
âœ“ éªŒè¯å®Œæˆ
- Files: [å·²éªŒè¯çš„æ–‡ä»¶åˆ—è¡¨]
- Build: æˆåŠŸ
- Tests: [X/X é€šè¿‡]
- Static Analysis: æ— è­¦å‘Š
- ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡
```

### Any Check Fails
```
âœ— éªŒè¯å¤±è´¥
- å¤±è´¥æ£€æŸ¥: [å“ªä¸ªæ­¥éª¤]
- é”™è¯¯: [å®é™…é”™è¯¯ä¿¡æ¯]
- ä¸‹ä¸€æ­¥: [ä¿®å¤/é‡è¯•/å‡çº§]
```

## Failure Escalation (å¤±è´¥å‡çº§)

```
ç¬¬1æ¬¡å¤±è´¥ â†’ ä¿®å¤åé‡è¯•
ç¬¬2æ¬¡å¤±è´¥ â†’ åˆ†ææ ¹æœ¬åŸå› 
ç¬¬3æ¬¡å¤±è´¥ â†’ åœæ­¢å¹¶å‡çº§

å‡çº§æ­¥éª¤:
1. è®°å½•æ‰€æœ‰å°è¯•
2. æ•è·é”™è¯¯ä¿¡æ¯
3. è¯†åˆ«å¯èƒ½åŸå› 
4. å‘ç”¨æˆ·è¯·æ±‚æŒ‡å¯¼
```

## Recording Results

After each verification cycle, record in `.wukong/notepads/{plan}/verification.md`:

```markdown
## éªŒè¯: {date} - {task}

### æ‰§è¡Œçš„æ£€æŸ¥
- [ ] æ–‡ä»¶å­˜åœ¨
- [ ] æ„å»ºé€šè¿‡
- [ ] é™æ€åˆ†æé€šè¿‡
- [ ] æµ‹è¯•é€šè¿‡
- [ ] æ— å›å½’

### ç»“æœ
{æ¯ä¸ªæ£€æŸ¥çš„å®é™…è¾“å‡º}

### å‘ç°çš„é—®é¢˜
{å‘ç°çš„ä»»ä½•é—®é¢˜}

### è§£å†³æ–¹æ¡ˆ
{é—®é¢˜å¦‚ä½•è§£å†³}
```

## Anti-Patterns (ç¦å¿Œ)

**NEVER (ç»ä¸):**
- è·³è¿‡éªŒè¯"èŠ‚çœæ—¶é—´"
- ä¸æ£€æŸ¥å°±ä¿¡ä»»åˆ†èº«çš„å£°æ˜
- æ²¡æœ‰è¯æ®å°±æ ‡è®°ä»»åŠ¡å®Œæˆ
- å¿½ç•¥å¤±è´¥çš„æµ‹è¯•
- ç”¨ `#pragma warning disable` æˆ– `# type: ignore` å‹åˆ¶é”™è¯¯
- ä¸ç¡®å®šæ—¶å£°ç§°æˆåŠŸ

**ALWAYS (å§‹ç»ˆ):**
- ç”¨å®é™…å‘½ä»¤éªŒè¯æ¯ä¸ªå£°æ˜
- æ•è·å¹¶è®°å½•è¾“å‡º
- åœ¨ç»§ç»­ä¹‹å‰è§£å†³å¤±è´¥
- å¯¹å·²éªŒè¯å’Œå‡è®¾çš„å†…å®¹ä¿æŒè¯šå®
