{
  "$schema": "./schema/track-dags.schema.json",
  "version": "1.0",
  "description": "轨道 DAG 定义 - Single Source of Truth",

  "tracks": {
    "Feature": {
      "trigger_keywords": ["添加", "创建", "新增", "实现", "开发", "add", "create", "new", "implement", "feature"],
      "dag": [
        {"phase": 1, "avatars": ["耳", "眼"], "parallel": true, "description": "需求+探索"},
        {"phase": 2, "avatars": ["意"], "parallel": false, "description": "设计"},
        {"phase": 3, "avatars": ["身"], "parallel": false, "description": "实现"},
        {"phase": 4, "avatars": ["舌", "鼻"], "parallel": true, "description": "验证+审查"}
      ],
      "gate_requirement": "L2"
    },
    "Fix": {
      "trigger_keywords": ["修复", "修正", "解决", "bug", "fix", "error", "crash", "issue", "问题"],
      "dag": [
        {"phase": 1, "avatars": ["眼", "鼻"], "parallel": true, "description": "定位+审查"},
        {"phase": 2, "avatars": ["身"], "parallel": false, "description": "修复"},
        {"phase": 3, "avatars": ["舌"], "parallel": false, "description": "回归测试"}
      ],
      "gate_requirement": "L2"
    },
    "Refactor": {
      "trigger_keywords": ["重构", "优化", "清理", "整理", "refactor", "clean", "optimize", "modernize"],
      "dag": [
        {"phase": 1, "avatars": ["眼"], "parallel": false, "description": "现状分析"},
        {"phase": 2, "avatars": ["意"], "parallel": false, "description": "重构策略"},
        {"phase": 3, "avatars": ["身"], "parallel": false, "description": "实施"},
        {"phase": 4, "avatars": ["鼻", "舌"], "parallel": true, "description": "验证+审查"}
      ],
      "gate_requirement": "L2"
    },
    "Direct": {
      "trigger_keywords": [],
      "dag": [
        {"phase": 1, "avatars": [], "parallel": false, "description": "直接执行指定分身"}
      ],
      "gate_requirement": "L1"
    }
  }
}
