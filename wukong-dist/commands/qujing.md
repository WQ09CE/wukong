# Qujing (å–ç») - Learn from Open Source Projects

> **BLOCKING checklist** - Complete ALL phases before finishing.
>
> å–ç»ï¼šå‘ä¼˜ç§€å¼€æºé¡¹ç›®å­¦ä¹ ï¼Œæå–æ¶æ„æ¨¡å¼ã€æœ€ä½³å®è·µï¼Œå†…åŒ–ä¸º wukong çš„æ™ºæ…§ã€‚

## Trigger

```
/qujing <project-url-or-path>
/qujing <project-url> --focus=<area>
/qujing <project-url> --output=<type>
å–ç» <project>
```

**Parameters:**
| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `project` | GitHub URL æˆ–æœ¬åœ°è·¯å¾„ | `https://github.com/anthropics/anthropic-sdk-python` |
| `--focus` | èšç„¦é¢†åŸŸ (å¯é€‰) | `--focus=auth`, `--focus=testing`, `--focus=cli` |
| `--output` | è¾“å‡ºç±»å‹ (å¯é€‰) | `--output=concept` (é»˜è®¤), `--output=rule`, `--output=skill` |
| `--dry-run` | åªåˆ†æä¸å†™å…¥ (å¯é€‰) | `/qujing url --dry-run` |

---

## Pre-Check: Input Validation

> **STOP** - Before starting, validate the input!

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Q1. Is the project source valid?                       â”‚
â”‚      - GitHub URL: https://github.com/owner/repo        â”‚
â”‚      - Local path: /path/to/project                     â”‚
â”‚                                                         â”‚
â”‚      INVALID â†’ Stop and ask user for correct input      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Q2. Is the project too large? (>10000 files)           â”‚
â”‚                                                         â”‚
â”‚      YES â†’ Require --focus parameter                    â”‚
â”‚      NO  â†’ Proceed                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Q3. Does concept already exist?                        â”‚
â”‚      Check: ~/.wukong/concepts/{project-name}.md        â”‚
â”‚                                                         â”‚
â”‚      EXISTS â†’ Ask: Update or Skip?                      â”‚
â”‚      NOT EXISTS â†’ Proceed                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## BLOCKING CHECKLIST (3 Phases)

> **Must complete ALL 3 phases. Skipping any phase = Protocol Violation**

### Phase 1: æ¢ç» (Exploration) - ğŸ‘ï¸ çœ¼åˆ†èº«

> **Mode**: BACKGROUND (å¿…é¡»åå°æ‰§è¡Œ)
>
> **Cost**: CHEAP

#### å¬å”¤å£°æ˜

```
æˆ‘å°†å¬å”¤åˆ†èº«:
- **åˆ†èº«**: ğŸ‘ï¸ çœ¼ - çœ¼åˆ†èº«
- **åŸå› **: éœ€è¦æ¢ç´¢å¼€æºé¡¹ç›®çš„ç»“æ„å’Œå…³é”®å®ç°ï¼Œçœ¼åˆ†èº«ä¸“ç²¾ä»£ç æœç´¢å’Œæ¨¡å¼è¯†åˆ«
- **æŠ€èƒ½**: é¡¹ç›®ç»“æ„åˆ†æã€å…³é”®æ–‡ä»¶è¯†åˆ«ã€æ¨¡å¼å‘ç°
- **é¢„æœŸ**: è¿”å›é¡¹ç›®ç»“æ„å›¾ + å…³é”®æ–‡ä»¶åˆ—è¡¨ + åˆæ­¥å‘ç°
```

#### 7 æ®µå¼ Prompt

```markdown
## 1. TASK
æ¢ç´¢å¼€æºé¡¹ç›® {project_name}ï¼Œè¯†åˆ«å…¶æ¶æ„æ¨¡å¼å’Œå…³é”®å®ç°ã€‚
{å¦‚æœ‰ --focus}: é‡ç‚¹å…³æ³¨ {focus_area} ç›¸å…³å®ç°ã€‚

## 2. EXPECTED OUTCOME
- [ ] é¡¹ç›®ç»“æ„å›¾ (ç›®å½•æ ‘ + èŒè´£è¯´æ˜)
- [ ] å…³é”®æ–‡ä»¶åˆ—è¡¨ (â‰¤20 ä¸ªæœ€é‡è¦çš„æ–‡ä»¶)
- [ ] æ¶æ„æ¨¡å¼åˆæ­¥è¯†åˆ« (è‡³å°‘ 3 ä¸ªæ¨¡å¼)
- [ ] å€¼å¾—æ·±å…¥åˆ†æçš„ä»£ç ç‰‡æ®µ (â‰¤10 ä¸ª)

## 3. REQUIRED SKILLS
- é¡¹ç›®ç»“æ„åˆ†æ: è¯†åˆ«åˆ†å±‚æ¶æ„ã€æ¨¡å—åˆ’åˆ†
- æ¨¡å¼è¯†åˆ«: è¯†åˆ«è®¾è®¡æ¨¡å¼ã€æ¶æ„æ¨¡å¼
- å…³é”®è·¯å¾„å®šä½: æ‰¾åˆ°æ ¸å¿ƒå…¥å£å’Œå…³é”®æµç¨‹

## 4. REQUIRED TOOLS
- Bash: git clone (å¦‚éœ€)ã€lsã€tree
- Glob: æŸ¥æ‰¾å…³é”®æ–‡ä»¶ç±»å‹
- Grep: æœç´¢å…³é”®è¯ã€æ¨¡å¼
- Read: é˜…è¯»å…³é”®æ–‡ä»¶

## 5. MUST DO
- [ ] åˆ†æé¡¹ç›®ç›®å½•ç»“æ„
- [ ] è¯†åˆ«å…¥å£ç‚¹ (main, cli, api)
- [ ] è¯†åˆ«æ ¸å¿ƒæ¨¡å—å’Œä¾èµ–å…³ç³»
- [ ] è®°å½•é…ç½®æ–‡ä»¶å’Œçº¦å®š
- [ ] æå– README/docs ä¸­çš„æ¶æ„è¯´æ˜
- [ ] è¯†åˆ«æµ‹è¯•ç»“æ„å’Œæµ‹è¯•æ¨¡å¼
{å¦‚æœ‰ --focus}:
- [ ] é‡ç‚¹åˆ†æ {focus_area} ç›¸å…³ç›®å½•å’Œæ–‡ä»¶
- [ ] è¿½è¸ª {focus_area} çš„è°ƒç”¨é“¾

## 6. MUST NOT DO
- âŒ ä¿®æ”¹ä»»ä½•ä»£ç 
- âŒ ä¸‹ç»“è®ºæˆ–åšå†³ç­– (åªæ”¶é›†äº‹å®)
- âŒ çŒœæµ‹æœªéªŒè¯çš„å®ç°
- âŒ åˆ†æè¶…è¿‡ --focus èŒƒå›´å¤–çš„å†…å®¹ (å¦‚æœ‰ focus)

## 7. CONTEXT
- **é¡¹ç›®æ¥æº**: {project_url_or_path}
- **èšç„¦é¢†åŸŸ**: {focus_area or "å…¨é¢åˆ†æ"}
- **çº¦æŸ**: åªè¯»æ¢ç´¢ï¼Œæ”¶é›†ç´ æç»™æ„åˆ†èº«
- **è¾“å‡ºæ ¼å¼**: ä¸¥æ ¼éµå¾ªçœ¼åˆ†èº« Output Contract
```

#### Phase 1 Output Contract

```yaml
files:
  - path: "src/core/client.py"
    role: "æ ¸å¿ƒå®¢æˆ·ç«¯å®ç°"
  - path: "src/api/resources/"
    role: "API èµ„æºå®šä¹‰"

findings:
  - location: "src/core/client.py:50-80"
    description: "ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»º API å®¢æˆ·ç«¯"
  - location: "src/api/_base.py:1-30"
    description: "æ‰€æœ‰ API èµ„æºç»§æ‰¿è‡ª BaseResource"

structure: |
  project/
  â”œâ”€â”€ src/
  â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒé€»è¾‘
  â”‚   â”œâ”€â”€ api/           # API å®šä¹‰
  â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
  â”œâ”€â”€ tests/             # æµ‹è¯•
  â””â”€â”€ docs/              # æ–‡æ¡£

patterns_detected:
  - name: "Factory Pattern"
    evidence: "client.py:50"
  - name: "Resource-based API"
    evidence: "api/_base.py"
```

#### Phase 1 Checklist

```
â–¡ é¡¹ç›®å·²å…‹éš†/å¯è®¿é—®
â–¡ ç›®å½•ç»“æ„å·²åˆ†æ
â–¡ å…³é”®æ–‡ä»¶å·²è¯†åˆ« (â‰¤20)
â–¡ åˆæ­¥æ¨¡å¼å·²å‘ç° (â‰¥3)
â–¡ ä»£ç ç‰‡æ®µå·²æå– (â‰¤10)
â–¡ è¾“å‡ºç¬¦åˆ Contract æ ¼å¼
```

---

### Phase 2: æ‚Ÿç» (Understanding) - ğŸ§  æ„åˆ†èº«

> **Mode**: BLOCKING (é˜»å¡æ‰§è¡Œ)
>
> **Cost**: EXPENSIVE
>
> **Dependencies**: Phase 1 å®Œæˆ

#### å¬å”¤å£°æ˜

```
æˆ‘å°†å¬å”¤åˆ†èº«:
- **åˆ†èº«**: ğŸ§  æ„ - æ„åˆ†èº«
- **åŸå› **: éœ€è¦æ·±åº¦åˆ†ææ¶æ„è®¾è®¡å¹¶æç‚¼æœ€ä½³å®è·µï¼Œæ„åˆ†èº«ä¸“ç²¾è®¾è®¡å†³ç­–
- **æŠ€èƒ½**: æ¶æ„åˆ†æã€æ¨¡å¼æç‚¼ã€å†³ç­–è®°å½•ã€æƒè¡¡åˆ†æ
- **é¢„æœŸ**: è¿”å›ç»“æ„åŒ–çš„ Concept Draftï¼ŒåŒ…å«æ¨¡å¼ã€å®è·µã€å†³ç­–
```

#### 7 æ®µå¼ Prompt

```markdown
## 1. TASK
åŸºäºçœ¼åˆ†èº«çš„æ¢ç´¢ç»“æœï¼Œæ·±åº¦åˆ†æ {project_name} çš„æ¶æ„è®¾è®¡ï¼Œæç‚¼å¯å¤ç”¨çš„æ¨¡å¼å’Œæœ€ä½³å®è·µã€‚

## 2. EXPECTED OUTCOME
- [ ] Concept Draft (ç»“æ„åŒ–æ¦‚å¿µæ–‡æ¡£)
- [ ] è‡³å°‘ 3 ä¸ªæ¶æ„æ¨¡å¼æè¿°
- [ ] è‡³å°‘ 5 ä¸ªæœ€ä½³å®è·µæ€»ç»“
- [ ] å…³é”®å†³ç­–åŠå…¶ Tradeoffs
- [ ] å¯åº”ç”¨äº wukong çš„å»ºè®®

## 3. REQUIRED SKILLS
- æ¶æ„åˆ†æ: è¯†åˆ«åˆ†å±‚ã€ä¾èµ–ã€è¾¹ç•Œ
- æ¨¡å¼æç‚¼: ä»å…·ä½“å®ç°æŠ½è±¡ä¸ºé€šç”¨æ¨¡å¼
- å†³ç­–åˆ†æ: ç†è§£è®¾è®¡é€‰æ‹©èƒŒåçš„æƒè¡¡
- æ–‡æ¡£ç¼–å†™: ç”Ÿæˆæ¸…æ™°çš„æ¦‚å¿µæ–‡æ¡£

## 4. REQUIRED TOOLS
- Read: æ·±åº¦é˜…è¯»å…³é”®æ–‡ä»¶
- Write: ç”Ÿæˆ Concept Draft (.md æ–‡ä»¶)

## 5. MUST DO
- [ ] åˆ†ææ¯ä¸ªè¯†åˆ«çš„æ¶æ„æ¨¡å¼
- [ ] æç‚¼è‡³å°‘ 5 ä¸ªæœ€ä½³å®è·µ
- [ ] è®°å½•å…³é”®å†³ç­–åŠå…¶ Tradeoffs
- [ ] å¼•ç”¨å…·ä½“ä»£ç ä½œä¸º Evidence
- [ ] æ ‡æ³¨ä»»ä½•å‡è®¾ (Assumptions)
- [ ] è¯„ä¼°å¯¹ wukong çš„é€‚ç”¨æ€§

## 6. MUST NOT DO
- âŒ å†™å®ç°ä»£ç 
- âŒ æ‰§è¡Œä»»ä½•å‘½ä»¤
- âŒ åœ¨æ²¡æœ‰è¯æ®çš„æƒ…å†µä¸‹ä¸‹ç»“è®º
- âŒ ç›´æ¥ä¿®æ”¹ wukong çš„ rules/skills

## 7. CONTEXT
- **æ¢ç´¢ç»“æœ**: {phase1_output}
- **èšç„¦é¢†åŸŸ**: {focus_area or "å…¨é¢åˆ†æ"}
- **è¾“å‡ºä½ç½®**: Concept Draft ç”¨äº Phase 3 éªŒè¯
- **çº¦æŸ**: åŸºäºè¯æ®åˆ†æï¼Œæ˜ç¡®æ ‡æ³¨å‡è®¾
```

#### Phase 2 Output Contract (Concept Draft)

```markdown
# Concept: {Project Name}

> æ¥æº: {project_url}
> å–ç»æ—¥æœŸ: {date}
> èšç„¦é¢†åŸŸ: {focus_area or "å…¨é¢"}

## Overview
{é¡¹ç›®ç®€ä»‹ï¼Œ1-2 æ®µ}

## Architecture Patterns

### Pattern 1: {Pattern Name}
**æè¿°**: {æ¨¡å¼æè¿°}
**è¯æ®**: `{file:line}` - {ä»£ç ç‰‡æ®µæ‘˜è¦}
**é€‚ç”¨åœºæ™¯**: {ä½•æ—¶ä½¿ç”¨}
**å®ç°è¦ç‚¹**:
- {è¦ç‚¹ 1}
- {è¦ç‚¹ 2}

### Pattern 2: {Pattern Name}
...

## Best Practices

### Practice 1: {Practice Title}
**æè¿°**: {å®è·µæè¿°}
**è¯æ®**: `{file:line}`
**å¥½å¤„**: {å¸¦æ¥ä»€ä¹ˆå¥½å¤„}
**ç¤ºä¾‹**:
```{language}
{code_example}
```

### Practice 2: {Practice Title}
...

## Key Decisions

### Decision 1: {Decision Title}
- **é€‰æ‹©**: {åšäº†ä»€ä¹ˆé€‰æ‹©}
- **ç†ç”±**: {ä¸ºä»€ä¹ˆè¿™æ ·é€‰}
- **æ›¿ä»£æ–¹æ¡ˆ**: {è€ƒè™‘è¿‡çš„å…¶ä»–æ–¹æ¡ˆ}
- **Tradeoff**: {æƒè¡¡å–èˆ}

## Applicability to Wukong

### å¯ç›´æ¥é‡‡ç”¨
- {å®è·µ 1}: {å¦‚ä½•åº”ç”¨}
- {å®è·µ 2}: {å¦‚ä½•åº”ç”¨}

### éœ€è¦é€‚é…
- {æ¨¡å¼ 1}: {éœ€è¦å“ªäº›è°ƒæ•´}

### ä¸é€‚ç”¨
- {æ¨¡å¼ X}: {ä¸ºä»€ä¹ˆä¸é€‚ç”¨}

## Assumptions
- {å‡è®¾ 1}: {åŸºäºçš„å‰æ}
- {å‡è®¾ 2}: {éœ€è¦éªŒè¯çš„ç‚¹}

## References
- {file:line}: {ç®€è¿°}
- {file:line}: {ç®€è¿°}
```

#### Phase 2 Checklist

```
â–¡ çœ¼åˆ†èº«è¾“å‡ºå·²æ¥æ”¶
â–¡ æ¶æ„æ¨¡å¼å·²åˆ†æ (â‰¥3)
â–¡ æœ€ä½³å®è·µå·²æç‚¼ (â‰¥5)
â–¡ å…³é”®å†³ç­–å·²è®°å½•
â–¡ Evidence å·²å¼•ç”¨
â–¡ Assumptions å·²æ ‡æ³¨
â–¡ Concept Draft å·²ç”Ÿæˆ
```

---

### Phase 3: è—ç» (Storage) - æœ¬ä½“

> **Mode**: BLOCKING
>
> **Executor**: æœ¬ä½“ (éåˆ†èº«)
>
> **Dependencies**: Phase 2 å®Œæˆ

#### Phase 3 Tasks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: éªŒè¯ Concept Draft å®Œæ•´æ€§                      â”‚
â”‚                                                         â”‚
â”‚  â–¡ Overview å­˜åœ¨ä¸”éç©º                                  â”‚
â”‚  â–¡ Architecture Patterns â‰¥ 3                            â”‚
â”‚  â–¡ Best Practices â‰¥ 5                                   â”‚
â”‚  â–¡ Key Decisions â‰¥ 1                                    â”‚
â”‚  â–¡ Applicability å·²è¯„ä¼°                                 â”‚
â”‚  â–¡ Evidence å·²å¼•ç”¨                                      â”‚
â”‚                                                         â”‚
â”‚  ä»»ä½•ç¼ºå¤± â†’ æ‰“å› Phase 2                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: æ£€æŸ¥å†²çª                                       â”‚
â”‚                                                         â”‚
â”‚  â–¡ è¯»å– ~/.wukong/concepts/{project}.md (å¦‚å­˜åœ¨)        â”‚
â”‚  â–¡ è¯»å–ç›¸å…³ rules/*.md                                  â”‚
â”‚  â–¡ æ£€æŸ¥æ–°æ¦‚å¿µæ˜¯å¦ä¸ç°æœ‰è§„åˆ™å†²çª                         â”‚
â”‚                                                         â”‚
â”‚  å†²çª â†’ æ ‡è®°å¾…äººå·¥å®¡æ ¸                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: å†™å…¥æ¦‚å¿µæ–‡ä»¶                                   â”‚
â”‚                                                         â”‚
â”‚  è·¯å¾„: ~/.wukong/concepts/{project-name}.md             â”‚
â”‚                                                         â”‚
â”‚  â–¡ åˆ›å»ºç›®å½• (å¦‚ä¸å­˜åœ¨)                                  â”‚
â”‚  â–¡ å†™å…¥ Concept Draft                                   â”‚
â”‚  â–¡ éªŒè¯æ–‡ä»¶å·²åˆ›å»º                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: å¯é€‰ - æ›´æ–° Rules/Skills                       â”‚
â”‚                                                         â”‚
â”‚  å¦‚æœ --output=rule:                                    â”‚
â”‚  â–¡ æå–å¯ä½œä¸ºè§„åˆ™çš„å®è·µ                                 â”‚
â”‚  â–¡ ç”Ÿæˆè§„åˆ™ patch å»ºè®®                                  â”‚
â”‚  â–¡ ç”¨æˆ·ç¡®è®¤åå†™å…¥                                       â”‚
â”‚                                                         â”‚
â”‚  å¦‚æœ --output=skill:                                   â”‚
â”‚  â–¡ æå–å¯ä½œä¸ºæŠ€èƒ½çš„æ¨¡å¼                                 â”‚
â”‚  â–¡ ç”ŸæˆæŠ€èƒ½å®šä¹‰è‰ç¨¿                                     â”‚
â”‚  â–¡ ç”¨æˆ·ç¡®è®¤åå†™å…¥                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Phase 3 Checklist

```
â–¡ Concept Draft éªŒè¯é€šè¿‡
â–¡ å†²çªæ£€æŸ¥å®Œæˆ
â–¡ æ–‡ä»¶å·²å†™å…¥: ~/.wukong/concepts/{project}.md
â–¡ è¾“å‡ºç±»å‹å¤„ç†å®Œæˆ (å¦‚æœ‰ --output)
â–¡ æœ€ç»ˆæŠ¥å‘Šå·²ç”Ÿæˆ
```

---

## Output Template

### æˆåŠŸè¾“å‡º

```markdown
## å–ç»å®Œæˆ: {project_name}

### å–ç»æ¦‚è¦
- **æ¥æº**: {project_url}
- **èšç„¦**: {focus_area or "å…¨é¢"}
- **æ—¥æœŸ**: {date}

### æ”¶è·ç»Ÿè®¡
| ç±»å‹ | æ•°é‡ |
|------|------|
| æ¶æ„æ¨¡å¼ | {n} |
| æœ€ä½³å®è·µ | {n} |
| å…³é”®å†³ç­– | {n} |

### å…³é”®æ”¶è·

#### æ¶æ„æ¨¡å¼
1. **{Pattern 1}**: {ç®€è¿°}
2. **{Pattern 2}**: {ç®€è¿°}

#### æœ€ä½³å®è·µ
1. **{Practice 1}**: {ç®€è¿°}
2. **{Practice 2}**: {ç®€è¿°}

### å­˜å‚¨ä½ç½®
- æ¦‚å¿µæ–‡æ¡£: `~/.wukong/concepts/{project-name}.md`
{å¦‚æœ‰ --output=rule}:
- è§„åˆ™å»ºè®®: `~/.wukong/concepts/{project-name}-rules.md`
{å¦‚æœ‰ --output=skill}:
- æŠ€èƒ½è‰ç¨¿: `~/.wukong/concepts/{project-name}-skill.md`

### åº”ç”¨å»ºè®®
{å¯¹ wukong çš„å…·ä½“åº”ç”¨å»ºè®®}
```

### å¤±è´¥è¾“å‡º

```markdown
## å–ç»å¤±è´¥: {project_name}

### å¤±è´¥é˜¶æ®µ
{Phase 1/2/3}: {å¤±è´¥åŸå› }

### å·²å®Œæˆçš„å·¥ä½œ
{å·²æ”¶é›†çš„ä¿¡æ¯}

### å»ºè®®æ“ä½œ
{å¦‚ä½•ä¿®å¤æˆ–é‡è¯•}
```

---

## Completion Verification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETION CHECKLIST                                   â”‚
â”‚                                                         â”‚
â”‚  â–¡ Phase 1: æ¢ç»å®Œæˆ                                    â”‚
â”‚    â–¡ çœ¼åˆ†èº«è¿”å› Output Contract æ ¼å¼                    â”‚
â”‚    â–¡ å…³é”®æ–‡ä»¶å·²è¯†åˆ«                                     â”‚
â”‚    â–¡ æ¨¡å¼å·²åˆæ­¥å‘ç°                                     â”‚
â”‚                                                         â”‚
â”‚  â–¡ Phase 2: æ‚Ÿç»å®Œæˆ                                    â”‚
â”‚    â–¡ æ„åˆ†èº«è¿”å› Concept Draft                           â”‚
â”‚    â–¡ Evidence å·²å¼•ç”¨                                    â”‚
â”‚    â–¡ Assumptions å·²æ ‡æ³¨                                 â”‚
â”‚                                                         â”‚
â”‚  â–¡ Phase 3: è—ç»å®Œæˆ                                    â”‚
â”‚    â–¡ Concept å·²éªŒè¯                                     â”‚
â”‚    â–¡ æ–‡ä»¶å·²å†™å…¥ ~/.wukong/concepts/                     â”‚
â”‚    â–¡ å†²çªæ£€æŸ¥é€šè¿‡                                       â”‚
â”‚                                                         â”‚
â”‚  ALL checked â†’ å–ç»å®Œæˆ                                 â”‚
â”‚  ANY missing â†’ GO BACK and complete missing phases      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration with Wukong System

### ä¸å…­æ ¹åˆ†èº«çš„å…³ç³»

```
å–ç»å‘½ä»¤è°ƒç”¨é“¾:
â”œâ”€â”€ ğŸ‘ï¸ çœ¼åˆ†èº« (Phase 1) - æ¢ç´¢é¡¹ç›®ï¼Œæ”¶é›†ç´ æ
â”œâ”€â”€ ğŸ§  æ„åˆ†èº« (Phase 2) - åˆ†æè®¾è®¡ï¼Œæç‚¼æ¦‚å¿µ
â””â”€â”€ æœ¬ä½“ (Phase 3) - éªŒè¯å­˜å‚¨ï¼Œç”ŸæˆæŠ¥å‘Š
```

### ä¸æˆ’å®šæ…§è¯†çš„å…³ç³»

```
å–ç»è¾“å‡ºéªŒè¯:
â”œâ”€â”€ æˆ’: æ£€æŸ¥ Output Contract å®Œæ•´æ€§
â”œâ”€â”€ å®š: éªŒè¯ Evidence å¯å¤ç°
â”œâ”€â”€ æ…§: æ£€æŸ¥ Assumptions åˆç†æ€§
â””â”€â”€ è¯†: å†™å…¥ ~/.wukong/concepts/
```

### ä¸æƒ¯æ€§æç¤ºçš„å…³ç³»

å–ç»äº§å‡ºçš„æ¦‚å¿µå¯ä½œä¸º T2 (å†³ç­–/Tradeoff) æ³¨å…¥åˆ°åç»­åˆ†èº«:

```
å–ç»æ¦‚å¿µ â†’ æ„åˆ†èº«å¬å”¤æ—¶æ³¨å…¥
         â†’ æ–—æˆ˜èƒœä½›å¬å”¤æ—¶æ³¨å…¥
```

---

## Examples

### Example 1: å–ç» Anthropic SDK

```bash
/qujing https://github.com/anthropics/anthropic-sdk-python --focus=client
```

**Phase 1 è¾“å‡ºæ‘˜è¦**:
```yaml
files:
  - src/anthropic/_client.py: "æ ¸å¿ƒå®¢æˆ·ç«¯"
  - src/anthropic/resources/: "API èµ„æº"
patterns_detected:
  - "Builder Pattern": client.py:100
  - "Resource-based API": resources/_base.py
```

**Phase 2 è¾“å‡ºæ‘˜è¦**:
```markdown
## Architecture Patterns

### Pattern 1: Resource-based API Design
æ¯ä¸ª API endpoint å¯¹åº”ä¸€ä¸ª Resource ç±»...

### Pattern 2: Streaming with Iterators
ä½¿ç”¨å¼‚æ­¥è¿­ä»£å™¨å¤„ç†æµå¼å“åº”...

## Best Practices

### Practice 1: Type-safe Request/Response
ä½¿ç”¨ Pydantic æ¨¡å‹ç¡®ä¿ç±»å‹å®‰å…¨...
```

**æœ€ç»ˆå­˜å‚¨**:
- `~/.wukong/concepts/anthropic-sdk-python.md`

---

### Example 2: å–ç» FastAPI (èšç„¦æµ‹è¯•)

```bash
/qujing https://github.com/tiangolo/fastapi --focus=testing
```

**Phase 1 è¾“å‡ºæ‘˜è¦**:
```yaml
files:
  - tests/: "æµ‹è¯•ç›®å½•"
  - tests/test_tutorial/: "æ•™ç¨‹æµ‹è¯•"
patterns_detected:
  - "Fixture-based Testing": conftest.py
  - "Parametrized Tests": test_*.py
```

**Phase 2 è¾“å‡ºæ‘˜è¦**:
```markdown
## Best Practices

### Practice 1: Test Client Fixture
ä½¿ç”¨ pytest fixture åˆ›å»ºå¯å¤ç”¨çš„æµ‹è¯•å®¢æˆ·ç«¯...

### Practice 2: Documentation as Tests
æ•™ç¨‹ä»£ç åŒæ—¶ä½œä¸ºæµ‹è¯•ç”¨ä¾‹...

## Applicability to Wukong

### å¯ç›´æ¥é‡‡ç”¨
- Fixture æ¨¡å¼: å¯ç”¨äº wukong æµ‹è¯•
- å‚æ•°åŒ–æµ‹è¯•: å¯æ‰©å±•æµ‹è¯•è¦†ç›–
```

**æœ€ç»ˆå­˜å‚¨**:
- `~/.wukong/concepts/fastapi.md`

---

## File Paths

| æ–‡ä»¶ç±»å‹ | è·¯å¾„ |
|----------|------|
| æ¦‚å¿µæ–‡æ¡£ | `~/.wukong/concepts/{project-name}.md` |
| è§„åˆ™å»ºè®® | `~/.wukong/concepts/{project-name}-rules.md` |
| æŠ€èƒ½è‰ç¨¿ | `~/.wukong/concepts/{project-name}-skill.md` |
| æ¦‚å¿µç´¢å¼• | `~/.wukong/concepts/index.json` |

---

## Troubleshooting

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| Phase 1 è¶…æ—¶ | é¡¹ç›®è¿‡å¤§ | ä½¿ç”¨ `--focus` é™åˆ¶èŒƒå›´ |
| å…‹éš†å¤±è´¥ | ç½‘ç»œé—®é¢˜ | ä½¿ç”¨æœ¬åœ°è·¯å¾„ |
| æ¨¡å¼è¯†åˆ«ä¸è¶³ | é¡¹ç›®ç»“æ„ç‰¹æ®Š | æ‰‹åŠ¨æŒ‡å®šå…³é”®æ–‡ä»¶ |
| æ¦‚å¿µå†²çª | ä¸ç°æœ‰è§„åˆ™çŸ›ç›¾ | äººå·¥å®¡æ ¸åå†³å®š |

---

## See Also

- `~/.claude/skills/jie.md` - åˆ†èº«è¾¹ç•Œå®šä¹‰
- `~/.claude/skills/summoning.md` - å¬å”¤åè®®
- `~/.claude/skills/hui.md` - åæ€ä¸æ²‰æ·€
- `~/.wukong/context/anchors/` - å†…éƒ¨å†³ç­–é”šç‚¹
